!function n(o,s,r){function a(e,t){if(!s[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}i=s[e]={exports:{}},o[e][0].call(i.exports,function(t){return a(o[e][1][t]||t)},i,i.exports,n,o,s,r)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<r.length;t++)a(r[t]);return a}({1:[function(H,i,n){!function(V,F){!function(){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var t,e;t=this,e=function(){"use strict";function c(t){return"function"==typeof t}var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,e=void 0,o=void 0,r=function(t,e){u[n]=t,u[n+1]=e,2===(n+=2)&&(o?o(p):z())};var t="undefined"!=typeof window?window:void 0,s=t||{},s=s.MutationObserver||s.WebKitMutationObserver,a="undefined"==typeof self&&void 0!==V&&"[object process]"==={}.toString.call(V),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(p,1)}}var u=new Array(1e3);function p(){for(var t=0;t<n;t+=2)(0,u[t])(u[t+1]),u[t]=void 0,u[t+1]=void 0;n=0}function g(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:l()}catch(t){return l()}}var h,f,m,z=void 0;function y(t,e){var i,n=this,o=new this.constructor(b),s=(void 0===o[w]&&R(o),n._state);return s?(i=arguments[s-1],r(function(){return x(s,o,i,n._result)})):P(n,o,t,e),o}function v(t){var e;return t&&"object"==typeof t&&t.constructor===this?t:(T(e=new this(b),t),e)}var z=a?function(){return V.nextTick(p)}:s?(f=0,a=new s(p),m=document.createTextNode(""),a.observe(m,{characterData:!0}),function(){m.data=f=++f%2}):d?((h=new MessageChannel).port1.onmessage=p,function(){return h.port2.postMessage(0)}):(void 0===t&&"function"==typeof H?g:l)(),w=Math.random().toString(36).substring(2);function b(){}var I=void 0,S=1,M=2;function q(t,n,o){r(function(e){var i=!1,t=function(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}(o,n,function(t){i||(i=!0,(n!==t?T:E)(e,t))},function(t){i||(i=!0,A(e,t))},e._label);!i&&t&&(i=!0,A(e,t))},t)}function C(t,e,i){var n,o;e.constructor===t.constructor&&i===y&&e.constructor.resolve===v?(n=t,(o=e)._state===S?E(n,o._result):o._state===M?A(n,o._result):P(o,void 0,function(t){return T(n,t)},function(t){return A(n,t)})):void 0!==i&&c(i)?q(t,e,i):E(t,e)}function T(e,t){if(e===t)A(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof t,null===t||"object"!=i&&"function"!=i)E(e,t);else{i=void 0;try{i=t.then}catch(t){return void A(e,t)}C(e,t,i)}var i}function L(t){t._onerror&&t._onerror(t._result),U(t)}function E(t,e){t._state===I&&(t._result=e,t._state=S,0!==t._subscribers.length)&&r(U,t)}function A(t,e){t._state===I&&(t._state=M,t._result=e,r(L,t))}function P(t,e,i,n){var o=t._subscribers,s=o.length;t._onerror=null,o[s]=e,o[s+S]=i,o[s+M]=n,0===s&&t._state&&r(U,t)}function U(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n,o=void 0,s=t._result,r=0;r<e.length;r+=3)n=e[r],o=e[r+i],n?x(i,n,o,s):o(s);t._subscribers.length=0}}function x(t,e,i,n){var o=c(i),s=void 0,r=void 0,a=!0;if(o){try{s=i(n)}catch(t){a=!1,r=t}if(e===s)return void A(e,new TypeError("A promises callback cannot return that same promise."))}else s=n;e._state===I&&(o&&a?T(e,s):!1===a?A(e,r):t===S?E(e,s):t===M&&A(e,s))}var k=0;function R(t){t[w]=k++,t._state=void 0,t._result=void 0,t._subscribers=[]}D.prototype._enumerate=function(t){for(var e=0;this._state===I&&e<t.length;e++)this._eachEntry(t[e],e)},D.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===v){var o,s=void 0,r=void 0,a=!1;try{s=e.then}catch(t){a=!0,r=t}s===y&&e._state!==I?this._settledAt(e._state,t,e._result):"function"!=typeof s?(this._remaining--,this._result[t]=e):i===_?(o=new i(b),a?A(o,r):C(o,e,s),this._willSettleAt(o,t)):this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},D.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===I&&(this._remaining--,t===M?A(n,i):this._result[e]=i),0===this._remaining&&E(n,this._result)},D.prototype._willSettleAt=function(t,e){var i=this;P(t,void 0,function(t){return i._settledAt(S,e,t)},function(t){return i._settledAt(M,e,t)})};var O=D;function D(t,e){this._instanceConstructor=t,this.promise=new t(b),this.promise[w]||R(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(e),0!==this._remaining)||E(this.promise,this._result)):A(this.promise,new Error("Array Methods must be provided an Array"))}B.prototype.catch=function(t){return this.then(null,t)},B.prototype.finally=function(e){var i=this.constructor;return c(e)?this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){throw t})}):this.then(e,e)};var _=B;function B(t){if(this[w]=k++,this._result=this._state=void 0,this._subscribers=[],b!==t){if("function"!=typeof t)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof B))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var e=this;try{t(function(t){T(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}}return _.prototype.then=y,_.all=function(t){return new O(this,t).promise},_.race=function(o){var s=this;return i(o)?new s(function(t,e){for(var i=o.length,n=0;n<i;n++)s.resolve(o[n]).then(t,e)}):new s(function(t,e){return e(new TypeError("You must pass an array to race."))})},_.resolve=v,_.reject=function(t){var e=new this(b);return A(e,t),e},_._setScheduler=function(t){o=t},_._setAsap=function(t){r=t},_._asap=r,_.polyfill=function(){var t=void 0;if(void 0!==F)t=F;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=_},_.Promise=_},"object"==typeof n&&void 0!==i?i.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}.call(this)}.call(this,H("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(t,e,i){var n,o,e=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(t){o=r}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var c,d=[],l=!1,u=-1;function p(){l&&c&&(l=!1,c.length?d=c.concat(d):u=-1,d.length)&&g()}function g(){if(!l){for(var t=a(p),e=(l=!0,d.length);e;){for(c=d,d=[];++u<e;)c&&c[u].run();u=-1,e=d.length}c=null,l=!1,!function(e){if(o===clearTimeout)return clearTimeout(e);if((o===r||!o)&&clearTimeout)return(o=clearTimeout)(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function f(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new h(t,e)),1!==d.length||l||a(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=f,e.addListener=f,e.once=f,e.off=f,e.removeListener=f,e.removeAllListeners=f,e.emit=f,e.prependListener=f,e.prependOnceListener=f,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var i=t("es6-promise"),n=t("./modules/customPolyfill"),o=t("./common/Timers"),s=t("./common/EventManager"),r=t("./common/Parameters"),a=t("./modules/BrowserStateTracker"),c=t("./modules/DynamicPlacements/Loader"),d=t("./modules/PlacementManager"),l=t("./modules/MawManager"),u=t("./modules/realtime-messaging/RealtimeMessaging"),p=t("./modules/RotationRulesAnalyticsManager"),g=t("./modules/SinglePageApplicationManager"),h=t("./modules/PassbackManager"),f=t("./modules/Demo"),m=t("./common/Utilities");function y(){r.initialize(),o.start(),s.start(),l.MawManager.start(),u.RealtimeMessaging.start(),a.start(),c.start(),d.start(),p.RotationRulesAnalyticsManager.start(s),r.config.integrations.dfp&&t("./modules/dfp/dfp-module").start(),r.config.integrations.sas&&m.BrowserUtils.attachScriptToElement("/iat-sas.js",document.head),new g.SinglePageApplicationManager(s).start(),new h.PassbackManager(d).start(),function t(e){void 0===e&&(e=0);if(window.frames["TG-listener"])return void m.BrowserUtils.attachScriptToElement("/iat-extension-1.7.0.js",document.head);e<10&&o.timeout(function(){return t(++e)},1e3)}(),(new f.DemoModule).run(),s.postStart()}(0,i.polyfill)(),n.CustomPolyfill.init(),document.all&&!document.addEventListener||window!==window.top||y()},{"./common/EventManager":4,"./common/Parameters":5,"./common/Timers":6,"./common/Utilities":7,"./modules/BrowserStateTracker":11,"./modules/Demo":12,"./modules/DynamicPlacements/Loader":14,"./modules/MawManager":18,"./modules/PassbackManager":19,"./modules/PlacementManager":20,"./modules/RotationRulesAnalyticsManager":21,"./modules/SinglePageApplicationManager":22,"./modules/customPolyfill":26,"./modules/dfp/dfp-module":28,"./modules/realtime-messaging/RealtimeMessaging":33,"es6-promise":1}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.EventManagerAPI=i.postStart=i.start=i.emit=i.unlisten=i.listen=void 0;var o=t("./Timers"),n=t("./Parameters"),s=t("./../interfaces/Enums"),r=t("../modules/API"),a={},c={};function d(e){a[e]=function(t){h(e,t)}}function l(e){var i;a[e]=function(t){o.clear(i),i=o.timeout(function(){h(e,t)},100)}}function u(){window.addEventListener("keydown",a[6]),document.body.addEventListener("mousemove",a[0]),n.config.device!==s.DeviceType.Desktop&&(window.addEventListener("pageshow",a.pageshow),window.addEventListener("pagehide",a.pagehide)),document.hasFocus&&(document.hasFocus()?a[4](null):a[3](null));for(var t=window.frames,e=0;e<t.length;e++)try{var i=t[e].frameElement;i.contentWindow&&(i.contentWindow.addEventListener("scroll",a[1],!0),i.contentWindow.addEventListener("touchmove",a[1]),i.contentWindow.addEventListener("resize",a[2]),i.contentWindow.addEventListener("blur",a[3]),i.contentWindow.addEventListener("focus",a[4]),i.contentWindow.addEventListener("visibilitychange",a[10]),i.contentWindow.addEventListener("keypress",a[5]),i.contentWindow.addEventListener("click",a[7]),i.contentWindow.addEventListener("mousemove",a[0]),i.contentWindow.addEventListener("touchstart",a[9]))}catch(t){}}function p(t,e){c[t]?c[t].push(e):c[t]=[e]}function g(t,e){c[t]&&-1<(e=c[t].indexOf(e))&&c[t].splice(e,1)}function h(t,e){if(c[t])for(var i=c[t].length;-1<--i;)c[t][i](e)}i.listen=p,i.unlisten=g,i.emit=h,i.start=function(){var e,i,n;r.extend(r.ApiModule.EventManager,new f),d(3),d(4),d(10),d(7),l(1),l(2),l(5),d(6),d(9),a[0]=(n=!1,function(t){e===t.screenX||i===t.screenY||n||(e=t.screenX,i=t.screenY,n=!0,h(0,t),o.timeout(function(){n=!1},1e3))}),window.addEventListener("scroll",a[1],!0),window.addEventListener("touchmove",a[1]),window.addEventListener("resize",a[2]),window.addEventListener("blur",a[3]),window.addEventListener("focus",a[4]),window.addEventListener("visibilitychange",a[10]),window.addEventListener("keypress",a[5]),window.addEventListener("click",a[7])},i.postStart=function(){var e=!1,i=!1;p(8,u),"complete"===document.readyState?h(8,null):o.timeout(function(){i||(e=!0,h(8,null))},1e3),window.addEventListener("load",function(t){e?e=!1:(i=!0,h(8,t))})};m.prototype.listen=function(t,e){p(t,e)},m.prototype.unlisten=function(t,e){g(t,e)},m.prototype.emit=function(t,e){h(t,e)};var f=m;function m(){}i.EventManagerAPI=f},{"../modules/API":10,"./../interfaces/Enums":9,"./Parameters":5,"./Timers":6}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getBaseUrl=o.updateConfiguration=o.initialize=o.config=void 0;var i=t("../interfaces/Enums");o.initialize=function(){o.config=window.__tgconf,o.config.device="Smartphone"===o.config.d_type?i.DeviceType.Mobile:"Tablet"===o.config.d_type?i.DeviceType.Tablet:i.DeviceType.Desktop,o.config.version=function(){if(!document.currentScript)return"";var t=document.currentScript.getAttribute("src");if(!t)return"";try{var e=t.split("/");return e[e.length-1].replace("iat-","").replace(".js","")}catch(t){return""}}()},o.updateConfiguration=function(t){o.config.sessionId=t.sessionId,o.config.section=t.section,o.config.znl=t.znl,o.config.dads=t.dads,o.config.ivm=t.ivm},o.getBaseUrl=function(t){var e=o.config.rootPath,i=0<e.indexOf("-dev"),n=i?"-dev":"";return(e=i&&!t?e.replace("https://","http://"):e).replace("services"+n,t?"cdn"+n:"www")}},{"../interfaces/Enums":9}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.start=i.clear=i.interval=i.timeout=void 0;var n=t("./Utilities"),o={};function s(){var i=+new Date;(0,n.foreach)(o,function(t){var e=o[t];if(e)switch(e.type){case 0:e.timeElapsed+=i-e.lastTick,e.lastTick=i,e.timeElapsed>e.delay&&(e.callback(),delete o[t]);break;case 1:e.timeElapsed+=i-e.lastTick,e.lastTick=i,e.timeElapsed>e.delay&&(e.callback(),e.timeElapsed-=e.delay)}})}function r(t,e,i){var n=Math.floor(1e8*Math.random());return o[n]={callback:t,delay:e,timeElapsed:0,lastTick:+new Date,type:i},n}i.timeout=function(t,e){return r(t,e,0)},i.interval=function(t,e){return r(t,e,1)},i.clear=function(t){o[t]&&delete o[t]},i.start=function(){window.setInterval(s,100)}},{"./Utilities":7}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CryptoUtils=i.BrowserUtils=i.Cookies=i.getSlotSizesForDevice=i.tryParseInt=i.generateBeacon=i.removeClass=i.addClass=i.setCssProperty=i.setFrameSize=i.getFrameSize=i.getElementSize=i.extendCustomTargeting=i.getDocumentHeight=i.getViewport=i.foreach=void 0;var s=t("../common/Parameters"),n=t("../interfaces/Configuration"),r=t("../interfaces/Enums");function a(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,top:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}}function o(t){return!t||""===(t=t.replace(/px/,""))||"auto"===t?0:parseInt(t)}i.foreach=function(t,e){Object.keys(t).forEach(e)},i.getViewport=a,i.getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},i.extendCustomTargeting=function(t,e){for(var i in e)t[i]?t[i]=function(t,e){for(var i=e.length-1;-1<i;i--)-1<t.indexOf(e[i])||t.push(e[i]);return t}(t[i],e[i]):t[i]=e[i];return t};var c=new RegExp("rect\\(((?:[0-9]*px\\s?)*)\\)");function d(t,e,i,n){t.style.setProperty(e,i,n)}function l(t,e,i){var n=new Date,n=(n.setTime(n.getTime()+1e3*i),"; expires="+n.toUTCString()+"; max-age="+i),i="; domain=."+s.config.domain;document.cookie=t+"="+e+n+i+"; path=/; samesite=lax"}function u(){}function p(){}i.getElementSize=function(t){if(t.style&&t.style.clip){var e=t.style.clip.replace(/,/g,"").match(c);if(e)return e=e[1].split(" "),new n.Size(o(e[1])-o(e[3]),o(e[2])-o(e[0]))}return new n.Size(t.offsetWidth||o(t.style.width)||0,t.offsetHeight||o(t.style.height)||0)},i.getFrameSize=function(t){var e,i;if(t.contentDocument)return i=t.contentDocument.body,e=Math.max(i.scrollWidth,i.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth),i=Math.max(i.scrollHeight,i.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),new n.Size(e,i)},i.setFrameSize=function(t,e,i){t.setAttribute("width",e+"px"),t.setAttribute("height",i+"px"),d(t,"width",e+"px","important"),d(t,"height",i+"px","important")},i.setCssProperty=d,i.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},i.removeClass=function(t,e){e=new RegExp("(\\s|^)"+e+"(\\s|$)","g"),t.className=t.className.replace(e," ").trim()},i.generateBeacon=function(t){t=t.replace(/\[RANDOM\]/g,Math.floor(1e8*Math.random()).toString());var e=document.createElement("img");e.onload=function(){document.body.removeChild(e)},e.setAttribute("style","width:0;height:0;display:none;"),e.setAttribute("src",t),document.body.appendChild(e)},i.tryParseInt=function(t){try{return parseInt(t)}catch(t){return 0}},i.getSlotSizesForDevice=function(t,e){var i=[360,200],n=s.config.device===r.DeviceType.Mobile,o=((t=t.filter(function(t){return!(t[0]===e[0]&&t[1]===e[1])&&(n&&t[0]<=i[0]||!n&&(t[0]>i[0]||t[1]>i[1]))})).unshift(e),a().width);return t=t.filter(function(t){return t[0]<=o})},(t=i.Cookies||(i.Cookies={})).IdleCookieName="___iat_idl",t.AdhesionDismissedCookieName="___iat_adhd",t.RealtimeMultiplierCookieName="___iat_rtmt",t.createCookie=function(t,e,i){s.config.cookies&&l(t,e,i)},t.eraseCookie=function(t){l(t,"",-1)},t.readCookie=function(t){t+="=";for(var e=document.cookie.split(";"),i=e.length;-1<--i;){var n=e[i].trim();if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""},u.getTopMostPageUrl=function(){return window.top.location.href},u.getTopMostHostname=function(){return window.top.location.hostname},u.getScriptElement=function(t,e,i){var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=t,e&&n.setAttribute("width",e.toString()),i&&n.setAttribute("height",i.toString()),n},u.attachScriptToElement=function(t,e,i){void 0===i&&(i=!0);t=u.getScriptElement(s.getBaseUrl(!0)+t+(i?"?ts="+ +new Date:""));e.appendChild(t)},u.buildRequestByUrl=function(i,n,o){var s=document.createElement("iframe"),r=(s.setAttribute("style","border-width:0px"),s.style.display="none",s.style.margin="0 auto",s.src="about:blank",i.appendChild(s),window.setInterval(function(){var t=s.contentDocument||(s.contentWindow?s.contentWindow.document:null);if(t&&"complete"===t.readyState)try{var e=u.getScriptElement(n);o&&(e.onload=function(){o(s.contentWindow),window.setTimeout(function(){return i.removeChild(s)},0)}),t.body.appendChild(e)}catch(t){}finally{window.clearInterval(r)}},10))},i.BrowserUtils=u,p.generateUniqueId=function(){return this.generate(8)},p.generateIatFrameId=function(){return this.generate(4)},p.generate=function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},i.CryptoUtils=p},{"../common/Parameters":5,"../interfaces/Configuration":8,"../interfaces/Enums":9}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Size=void 0,i.Size=function(t,e){var i=this;this.isBlank=function(){return 0===i.width&&0===i.height},this.isTooSmall=function(){return i.width<10||i.height<10},this.toString=function(){return i.width+"x"+i.height},this.width=t,this.height=e}},{}],9:[function(t,e,i){"use strict";var n;Object.defineProperty(i,"__esModule",{value:!0}),i.SideBannerPosition=i.AdUnitType=i.UnitViewState=i.BrowserState=i.EventType=i.TimerType=i.DeviceType=i.EntryState=void 0,(n=i.EntryState||(i.EntryState={}))[n.Response=0]="Response",n[n.Blank=1]="Blank",(n=i.DeviceType||(i.DeviceType={}))[n.Desktop=0]="Desktop",n[n.Tablet=1]="Tablet",n[n.Mobile=2]="Mobile",(n=i.TimerType||(i.TimerType={}))[n.Timeout=0]="Timeout",n[n.Interval=1]="Interval",(n=i.EventType||(i.EventType={}))[n.MouseMove=0]="MouseMove",n[n.Scroll=1]="Scroll",n[n.Resize=2]="Resize",n[n.Blur=3]="Blur",n[n.Focus=4]="Focus",n[n.KeyPress=5]="KeyPress",n[n.KeyDown=6]="KeyDown",n[n.Click=7]="Click",n[n.PageLoad=8]="PageLoad",n[n.TouchStart=9]="TouchStart",n[n.VisibilityChange=10]="VisibilityChange",n[n.MessagingConnected=11]="MessagingConnected",n[n.MessagingDisconnected=12]="MessagingDisconnected",n[n.NewImpression=13]="NewImpression",n[n.MapCap=14]="MapCap",n[n.DemoRedSquare=15]="DemoRedSquare",n[n.DemoReplaceAllAds=16]="DemoReplaceAllAds",n[n.StateChanged=17]="StateChanged",n[n.AdUnitCreated=18]="AdUnitCreated",n[n.AdUnitRemoved=19]="AdUnitRemoved",n[n.AdUnitViewState=20]="AdUnitViewState",n[n.BannerChanged=21]="BannerChanged",n[n.PublisherBlank=22]="PublisherBlank",(n=i.BrowserState||(i.BrowserState={}))[n.Unknown=-1]="Unknown",n[n.Inactive=0]="Inactive",n[n.Active=1]="Active",n[n.Idle=2]="Idle",(n=i.UnitViewState||(i.UnitViewState={}))[n.NotVisible=0]="NotVisible",n[n.Visible=1]="Visible",(n=i.AdUnitType||(i.AdUnitType={}))[n.normal=0]="normal",n[n.sticky=1]="sticky",n[n.bottom=2]="bottom",n[n.side=3]="side",n[n.verification=4]="verification",(n=i.SideBannerPosition||(i.SideBannerPosition={}))[n.None=0]="None",n[n.Top=1]="Top",n[n.Fixed=2]="Fixed",n[n.Bottom=3]="Bottom"},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ApiModule=i.get=i.extend=void 0,i.extend=function(t,e){window.__iat_api||window.__iat_api||(window.__iat_api={}),window.__iat_api[t.toString()]=e},i.get=function(t){return window.__iat_api[t.toString()]},(i=i.ApiModule||(i.ApiModule={})).RealtimeProvider="r",i.BrowserStateTracker="b",i.PlacementManager="p",i.EventManager="e",i.SAS="SAS"},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.BrowserStateTrackerAPI=i.start=i.minimumDurationForReEngagementReached=i.getCurrentState=void 0;var n,o,s,r,a,c=t("../modules/API"),d=t("./../common/EventManager"),l=t("./../common/Parameters"),u=t("./../common/Timers"),p=t("./../common/Utilities"),g=t("./../interfaces/Enums"),h=t("./realtime-messaging/RealtimeMessaging"),f=g.BrowserState.Unknown,m=!0,y=0,v=0;function w(){return f}function b(){l.config.ivm||(u.clear(n),n=u.timeout(function(){E(g.BrowserState.Idle)},o))}function I(){s=u.timeout(function(){h.RealtimeMessaging.disconnect()},r)}function S(t){m&&"mousemove"===t.type?m=!1:f!==g.BrowserState.Inactive&&(b(),E(g.BrowserState.Active))}function M(){f===g.BrowserState.Inactive&&E(g.BrowserState.Active)}function C(){document.hasFocus()||E(g.BrowserState.Inactive)}function T(){l.config.ivm&&("hidden"===document.visibilityState?E(g.BrowserState.Inactive):E(g.BrowserState.Active))}function E(t){if(f!==t){switch(t){case g.BrowserState.Active:h.RealtimeMessaging.isForcedDisconnected&&h.RealtimeMessaging.connect(),u.clear(s),p.Cookies.eraseCookie(p.Cookies.IdleCookieName),b(),0<y&&(v=+new Date-y,y=0);break;case g.BrowserState.Inactive:I(),u.clear(n),p.Cookies.eraseCookie(p.Cookies.IdleCookieName),y=+new Date,v=0;break;case g.BrowserState.Idle:I(),p.Cookies.createCookie(p.Cookies.IdleCookieName,"1",86400),y=+new Date,v=0}f=t,d.emit(17,t)}}i.getCurrentState=w,i.minimumDurationForReEngagementReached=function(){return a<v},i.start=function(){var t;c.extend(c.ApiModule.BrowserStateTracker,new A),t=l.config.smc||{},o=1e3*(t.idleTimer||19),r=1e3*(t.disconnectTimer||120),a=1e3*(l.config.mid||10),l.config.ivm?d.listen(10,T):(d.listen(4,M),d.listen(3,C)),d.listen(1,S),d.listen(0,S),d.listen(5,S),d.listen(6,S),d.listen(7,S),d.listen(9,S),l.config.ivm?E(g.BrowserState.Active):document.hasFocus()?E(p.Cookies.readCookie(p.Cookies.IdleCookieName)?g.BrowserState.Idle:g.BrowserState.Active):E(g.BrowserState.Inactive)};P.prototype.getCurrentState=function(){return f};var A=P;function P(){}i.BrowserStateTrackerAPI=A},{"../modules/API":10,"./../common/EventManager":4,"./../common/Parameters":5,"./../common/Timers":6,"./../common/Utilities":7,"./../interfaces/Enums":9,"./realtime-messaging/RealtimeMessaging":33}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DemoModule=void 0;var n=t("./../common/EventManager"),o=t("./PlacementManager");function s(){}s.prototype.run=function(){n.listen(15,this.onDemoRedSquareMessage),n.listen(16,this.onDemoReplaceAllAdsMessage)},s.prototype.onDemoRedSquareMessage=function(t){var e=document.createElement("DIV");e.setAttribute("style",t.script),document.body.appendChild(e),setTimeout(function(){e.parentElement&&e.parentElement.removeChild(e)},1e3*t.duration)},s.prototype.onDemoReplaceAllAdsMessage=function(r){o.getAdUnits().forEach(function(e){if(e.getCurrentEntry()){for(var t=e.element.getBoundingClientRect(),i=document.createElement("DIV"),n=(i.style.width=t.width+"px",i.style.height=t.height+"px",i.innerHTML=r.script,[]),o=0;o<e.element.children.length;o++){var s=e.element.children[o];"SCRIPT"===s.nodeName||-1<s.className.indexOf("iat-hidden")||(s.style.display="none",n.push(s))}e.element.appendChild(i),setTimeout(function(){e.element.removeChild(i);for(var t=0;t<n.length;t++)n[t].style.display="inline-block"},1e3*r.duration)}})},i.DemoModule=s},{"./../common/EventManager":4,"./PlacementManager":20}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=void 0;var Utilities=require("../../common/Utilities"),Timers=require("../../common/Timers"),EventManager=require("../../common/EventManager"),Parameters=require("../../common/Parameters"),PlacementManager=require("../PlacementManager"),utils_1=require("../dfp/utils"),configs={},adhesionContainer,adContainer,bottomMarginElement,overlayProcessorHandler=0;function getDismissedState(){var t=Utilities.Cookies.readCookie(Utilities.Cookies.AdhesionDismissedCookieName);return t?JSON.parse(t):{}}function userHasClosed(t){return 1===getDismissedState()[t]}function closedByUser(t){var e;!t||!t.dismissedDuration||t.dismissedDuration<=0||((e=getDismissedState())[t.adUnitId]=1,Utilities.Cookies.createCookie(Utilities.Cookies.AdhesionDismissedCookieName,JSON.stringify(e),t.dismissedDuration))}function render(t){var e,i,n,o="";t.isTracking?(o='<div id="iat-adhesion-bar-'+t.adUnitId+'" class="iat-adhesion-bar" style="position:fixed; bottom:0; left:0; right:0; width:100%; z-index: 2147483636;"><div class="iat-adhesion-banner id-'+t.adUnitId+'" style="margin: 0px auto; clear: both; width: '+t.size.width+"px; height: "+t.size.height+'px; "></div></div>',t.element.style.pointerEvents="none"):(e=Math.min(t.size.height,100),n=i="",n=!t.omitBackground?(i="border-top: 1px solid #7d7d7d; background: #fff; max-width: inherit; width: 100%; height: "+(e+10)+"px; z-index: 2147483636; padding-top: 5px; position: fixed; margin: 0; bottom: "+t.bottomMargin+"px; left: 0; right: 0; box-sizing: border-box","background-color: #fff; border: 1px solid #7d7d7d; border-bottom: 2px solid #fff; border-radius: 4px 4px 0 0; height: 24px; position: absolute; top: -23px; right: 0; display: block; padding: 2px 0 0 2px;"):(i="border-top: 1px solid #cacaca; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; background: #fff; max-width: inherit; height: "+(e+10)+"px; z-index: 2147483636; padding: 5px 5px 0px 5px; position: fixed; margin: 0; bottom: "+t.bottomMargin+"px; left: 50%; transform: translate(-50%, 0); box-sizing: border-box","background-color: #cacaca;border-radius: 20px;border: 2px #ffffff solid;height: 24px;position: absolute;top: -14px;right: -14px;display: block; padding: 0px 0 0 0px;z-index: 3147483636;"),o='<div id="iat-adhesion" style="'+i+'">   <div id="iat-adhesion-close-button">       <button style="'+n+'">           <span style="'+"position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); clip-path: polygon(0 0, 0 0, 0 0, 0 0);"+'">Close</span>           <svg style="width: 20px; " viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M19, 6.41L17.59, 5L12, 10.59L6.41, 5L5, 6.41L10.59, 12L5, 17.59L6.41, 19L12, 13.41L17.59, 19L19, 17.59L13.41, 12L19, 6.41Z"></path></svg>       </button>   </div>   <div id="iat-adhesion-banner-id-'+t.adUnitId+'" class="iat-adhesion-banner id-'+t.adUnitId+'" style="margin:0 auto; text-align: center"></div></div>',t.element.style.display="none"),t.element.innerHTML=o,document.body.appendChild(t.element),t.id=PlacementManager.createAdUnit({id:parseInt(t.adUnitId),element:t.element.querySelector(".iat-adhesion-banner.id-"+t.adUnitId),scriptWindow:window,window:window}),configs[t.adUnitId]=t}function toggleVisibility(t,e){var i=PlacementManager.getAdUnit(t.id);i&&((e=!e||t.loaded&&!isOverlayDisplayed(t)&&isValidInViewport(t)?e:!1)&&updateBottomMargin(),t.element.style.display=e?"block":"none",i.updateViewState(Utilities.getViewport()))}function onGetServedAdHeight(t,e){if(void 0===e&&(e=0),!adContainer||20===e)return t(0);var i=Utilities.getElementSize(adContainer).height;0===i?Timers.timeout(function(){return onGetServedAdHeight(t,++e)},0):t(i)}function updateVerticalAlignment(t){adContainer&&50<Math.min(t.size.height,100)&&onGetServedAdHeight(function(t){30<t&&t<100&&Math.round((100-t)/2)})}function updateBottomMargin(){adhesionContainer&&bottomMarginElement&&(adhesionContainer.style.bottom=getBottomMargin()+"px")}function getDeclaredBottom(t){for(var e=0;e<document.styleSheets.length;e++)try{for(var i=document.styleSheets,n=i[e].rules||i[e].cssRules,o=0;o<n.length;o++){var s=n[o];if(s.selectorText==="."+t)return s.style.bottom}}catch(t){}}function getBottomMargin(){var t,e,i,n;return!bottomMarginElement||(t=window.getComputedStyle(bottomMarginElement)).opacity&&parseFloat(t.opacity)<.5||(e=bottomMarginElement.getBoundingClientRect(),n=t.webkitTransform,n=new WebKitCSSMatrix(n).m42,(i=e.top+n)>window.innerHeight)||bottomMarginElement.style.bottom&&0<Math.abs(parseInt(bottomMarginElement.style.bottom))&&Math.abs(parseInt(bottomMarginElement.style.bottom))<=e.height?0:0<n||bottomMarginElement.style.bottom&&parseInt(bottomMarginElement.style.bottom)<=0||parseInt(getDeclaredBottom(bottomMarginElement.className))<=0||"fixed"===t.getPropertyValue("position")&&parseInt(t.getPropertyValue("bottom"))<=0?e.height:(n=window.innerHeight-i)>window.innerHeight||n>e.height?0:n}function bottomMarginProcessor(e){var i;window.MutationObserver&&e.bottomMarginSelector&&((bottomMarginElement=document.querySelector(e.bottomMarginSelector))?(e.bottomMargin=getBottomMargin(),(i=new MutationObserver(function(t){t.forEach(function(){var t;e.loaded&&!adhesionContainer||!bottomMarginElement?i.disconnect():(t=parseFloat(window.getComputedStyle(bottomMarginElement).webkitTransitionDuration),0<(t=isNaN(t)?0:t)?Timers.timeout(function(){return updateBottomMargin()},Math.min(1e3*t,150)):updateBottomMargin())})})).observe(document.body,{attributes:!0}),i.observe(bottomMarginElement,{attributes:!0,subtree:!0})):Timers.timeout(function(){return bottomMarginProcessor(e)},200))}function isValidInViewport(t){var e=Utilities.getViewport(),i=!0,e=(0<t.minimumScroll&&(!t.minimumScrollMaxViewportHeight||e.height<=t.minimumScrollMaxViewportHeight)&&(i=e.top>=t.minimumScroll),!(0<t.footerProtectionHeight)||e.top+e.height+t.footerProtectionHeight<=Utilities.getDocumentHeight());return i&&e}function viewportHandler(){Object.keys(configs).forEach(function(t){t=configs[t];t.isTracking||toggleVisibility(t,!0)})}function close(t,e,i){void 0===i&&(i=!1),delete configs[t.adUnitId],document.body.removeChild(t.element),EventManager.unlisten(21,bannerLoadedHandler),EventManager.unlisten(2,viewportHandler),EventManager.unlisten(1,viewportHandler),"user closed"===e&&closedByUser(t);var n,o=PlacementManager.getAdUnit(t.id);t.closeCallback&&window[t.closeCallback]&&"function"==typeof window[t.closeCallback]&&(n=o?o.getCurrentEntry():null,window[t.closeCallback]({closeAction:e,slot:n?n.index:0})),o&&!i&&o.delete(),!t.isTracking&&adContainer&&(e=adContainer.getAttribute("tg-zone"))&&e===t.id&&(bottomMarginElement=adContainer=adhesionContainer=void 0,Timers.clear(overlayProcessorHandler))}function wireUpCloseEvent(e){Timers.timeout(function(){var t=e.element.querySelector("#iat-adhesion-close-button");t&&t.addEventListener("click",function(){close(e,"user closed")})},100)}function bannerLoadedHandler(e){var t,i=configs[e.adUnitId];i&&(!(t=e.getCurrentEntry())||t.isEmpty()?close(i,"no inventory"):i.loaded?updateVerticalAlignment(i):(Utilities.foreach(configs,function(t){t!==e.adUnitId&&!configs[t].isTracking&&configs[t].loaded&&close(i,"only one ad unit allowed")}),e.isTrackingUnit||0!==e.currentEntryIndex||e.logPotentialImpression(),adhesionContainer=document.querySelector("#iat-adhesion"),adContainer=adhesionContainer.querySelector(".iat-adhesion-banner.id-"+i.adUnitId),i.loaded=!0,wireUpCloseEvent(i),onGetServedAdHeight(function(t){toggleVisibility(i,!0),updateVerticalAlignment(i)})))}function deleteHandler(t){t=configs[t.adUnitId];t&&close(t,"deleted",!0)}function isOverlayDisplayed(t){if(t.overlaySelector){var e=document.querySelectorAll(t.overlaySelector);if(e&&e.length)for(var i=0;i<e.length;i++){var n=window.getComputedStyle(e[i]);if("none"!==n.display&&"hidden"!==n.visibility)return 1}}}function overlayProcessor(t){t.overlaySelector&&(overlayProcessorHandler=Timers.interval(function(){toggleVisibility(t,!0)},200))}function evaluateLoadConditions(model){if(model){if(model.selector){var isMatch=null!==document.querySelector(model.selector),cssSelectorResult=model.selectorMatch&&isMatch||!model.selectorMatch&&!isMatch;if(!cssSelectorResult)return}if(model.slotPath)for(var getValue_1=function(value){var mustEval=!value.startsWith("/");try{return mustEval?eval(value):value}catch(error){return value}},slotPaths=model.slotPath.split(","),_loop_1=function(t){var e,i=utils_1.DfpUtils.getFinalSlotPath(getValue_1(slotPaths[t]));if(i)return e=Parameters.config.integrations.dfp.networkCode,0<(t=(t=utils_1.DfpUtils.isGptAvailable(window)?window.googletag.pubads().getSlots().filter(function(t){return utils_1.DfpUtils.getIntegratedAdUnitPath(t.getAdUnitPath(),e)===i}):[]).filter(function(t){return!model.slotElementId||t.getSlotElementId()===getValue_1(model.slotElementId)})).length&&(model.slotMustNotExist||null!==t[0].getResponseInformation())?{value:!1}:void 0},index=0;index<slotPaths.length;index++){var state_1=_loop_1(index);if("object"==typeof state_1)return state_1.value}}return 1}function create(t,e){var i;Parameters.config.dads||configs[t]||!e.conf.sizes||!e.conf.sizes[0]||userHasClosed(t)||(i={id:"will hold the full ad unit id, after creation",adUnitId:t,element:document.createElement("div"),size:e.conf.sizes.find(function(t){return t.height===Math.max.apply(Math,e.conf.sizes.map(function(t){return t.height}))}),footerProtectionHeight:e.conf.bottomHeight||0,closeCallback:e.conf.closeCallback,isTracking:e.tu,loaded:!1,overlaySelector:e.conf.overlaySelector,bottomMargin:0,bottomMarginSelector:e.conf.bottomMarginSelector,dismissedDuration:e.conf.dismissedDuration,minimumScroll:e.conf.minimumScroll||0,minimumScrollMaxViewportHeight:e.conf.minimumScrollMaxViewportHeight||0,omitBackground:e.conf.omitBackground||!1},Timers.timeout(function(){document.querySelector(".iat-adhesion-banner.id-"+i.adUnitId)||evaluateLoadConditions(e.conf.loadConditions)&&(i.bottomMarginSelector&&bottomMarginProcessor(i),render(i),i.overlaySelector&&overlayProcessor(i),e.tu||(EventManager.listen(2,viewportHandler),EventManager.listen(1,viewportHandler),EventManager.listen(21,bannerLoadedHandler)),EventManager.listen(19,deleteHandler))},1e3*(e.conf.showDelay||0)))}exports.create=create},{"../../common/EventManager":4,"../../common/Parameters":5,"../../common/Timers":6,"../../common/Utilities":7,"../PlacementManager":20,"../dfp/utils":30}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.start=void 0;var n=t("../../interfaces/Enums"),o=t("../../common/EventManager"),s=t("../../common/Parameters"),c=t("../../common/Utilities"),d=t("../PlacementManager"),r=t("./Sticky"),a=t("./Adhesion"),l=t("./SideBanner"),u=t("./Verification"),p=t("../tcf/tcf");function g(){var i=s.config.znl;(0,c.foreach)(i,function(t){var e=i[t];if(!e.dc||-1!==e.dc.toLowerCase().indexOf(n.DeviceType[s.config.device].toLowerCase()))switch(n.AdUnitType[e.type||"normal"]){case n.AdUnitType.normal:case n.AdUnitType.sticky:e.conf.containerElementSelector&&!function t(e,i,n){void 0===n&&(n=0);var o=document.querySelectorAll(i.conf.containerElementSelector);if(!o.length&&n<20)return setTimeout(function(){return t(e,i,++n)},100);for(var s=o.length;-1<--s;){var r,a=o[s];(i.tu||"inside"!==i.conf.elementSelectorPosition)&&(1===i.conf.sizes[0].width&&1===i.conf.sizes[0].height&&(r=(0,c.getElementSize)(a),i.conf.sizes[0].width=r.width,i.conf.sizes[0].height=r.height),r=document.createElement("div"),"inside"===i.conf.elementSelectorPosition?a.insertBefore(r,a.firstChild):a.parentNode.insertBefore(r,"before"===i.conf.elementSelectorPosition?a:a.nextSibling),(a=r).style.width=i.conf.sizes[0].width+"px",r.style.height=i.conf.sizes[0].height+"px",r.style.clear="both",i.tu)&&(r.style.position="absolute",r.style.pointerEvents="none"),d.createAdUnit({id:e,element:a,scriptWindow:window,window:window})}}(parseInt(t),e);break;case n.AdUnitType.bottom:(e.tu||p.TcfIntegration.isAllowed())&&a.create(t,e);break;case n.AdUnitType.side:e.conf&&e.conf.sizes&&e.conf.sizes.length&&l.create(t,e);break;case n.AdUnitType.verification:p.TcfIntegration.isAllowed()&&u.Verification.create(t,e)}})}i.start=function(){r.start(),o.listen(8,g)}},{"../../common/EventManager":4,"../../common/Parameters":5,"../../common/Utilities":7,"../../interfaces/Enums":9,"../PlacementManager":20,"../tcf/tcf":35,"./Adhesion":13,"./SideBanner":15,"./Sticky":16,"./Verification":17}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.create=void 0;var n=t("../../interfaces/Enums"),o=t("../../common/Utilities"),s=t("../PlacementManager"),r=t("../../common/EventManager"),a=(c.prototype.showAdZone=function(){var t;this.element?(this.element.style.display="block",(t=s.getAdUnit(this.id+".00"))&&t.updateViewState(o.getViewport())):(this.element=document.createElement("div"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.isTracking?this.element.style.pointerEvents="none":this.element.style.zIndex=this.zIndex,document.body.appendChild(this.element),"absolute"===this.isSticky?(this.element.style.position="absolute",this.element.style.top=this.top+"px"):(window.addEventListener("scroll",this.checkPosition.bind(this)),this.checkPosition()),s.createAdUnit({id:parseInt(this.id),element:this.element,scriptWindow:window,window:window}))},c.prototype.hideAdZone=function(){var t=s.getAdUnit(this.id+".00");t&&this.element&&(this.element.style.display="none",t.updateViewState(o.getViewport()))},c.prototype.checkPosition=function(){var t;this.element&&(t=o.getViewport(),this.footerDist&&t.top+this.height>o.getDocumentHeight()-this.footerDist?this.currPos!==n.SideBannerPosition.Bottom&&(this.element.style.position="absolute",this.element.style.top="",this.element.style.bottom=this.footerDist+"px",this.element.offsetParent.style.position||(this.element.offsetParent.style.position="relative"),this.currPos=n.SideBannerPosition.Bottom):t.top+this.fixDist<this.top&&this.currPos!==n.SideBannerPosition.Top?(this.element.style.position="absolute",this.element.style.top=this.top+"px",this.element.style.bottom="",this.currPos=n.SideBannerPosition.Top):t.top+this.fixDist>=this.top&&this.currPos!==n.SideBannerPosition.Fixed&&(this.element.style.position="fixed",this.element.style.top=this.fixDist+"px",this.element.style.bottom="",this.currPos=n.SideBannerPosition.Fixed))},c.prototype.findPosition=function(){for(var t=this.dockElem.offsetLeft,e=this.dockElem;e.offsetParent&&"BODY"!==e.offsetParent.nodeName.toUpperCase();)t+=(e=e.offsetParent).offsetLeft;return"left"===this.position?t-this.width-10+this.offset:t+10+o.getElementSize(this.dockElem).width+this.offset},c.prototype.reposition=function(){var t;this.element&&(t=this.findPosition(),this.element.style.left=t+"px")},c.prototype.fits=function(){return this.findPosition()>-1*this.width*(1-this.visibilityRatio)&&this.findPosition()<o.getViewport().width-this.width*this.visibilityRatio},c.prototype.onResize=function(){this.fits()?(this.showAdZone(),this.reposition()):this.hideAdZone()},c);function c(t,e){this.currPos=n.SideBannerPosition.None;var i=document.querySelector(e.conf.dockElementSelector);i&&(this.id=t,this.dockElem=i,this.position=e.conf.position||"right",this.width=e.conf.sizes[0].width,this.height=e.conf.sizes[0].height,this.visibilityRatio=(e.conf.visib||50)/100,this.offset=e.conf.horizontalOffset,this.zIndex=e.conf.zindex||"1",this.isSticky=e.conf.type||"dynamic",this.top=e.conf.initialTopOffset||0,this.footerDist=e.conf.footerDist||0,this.fixDist=e.conf.stickyTopOffset||0,this.isTracking=e.tu||!1,this.onResize(),r.listen(2,this.onResize.bind(this)))}i.create=function(t,e){var i=!0;if(e.conf.mustContainAdUnits&&0<e.conf.mustContainAdUnits.length)for(var i=!1,n=0;n<e.conf.mustContainAdUnits.length&&!(i=!!s.getAdUnit(t+".00"));n++);if(e.conf.cannotContainAdUnits&&0<e.conf.cannotContainAdUnits.length&&i)for(n=0;n<e.conf.cannotContainAdUnits.length&&(i=!s.getAdUnit(t+".00"));n++);i&&new a(t,e)}},{"../../common/EventManager":4,"../../common/Utilities":7,"../../interfaces/Enums":9,"../PlacementManager":20}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.start=void 0;var n=t("../../interfaces/Enums"),o=t("../../common/EventManager"),s=t("../../common/Parameters"),r=t("../../common/Utilities"),a={},c=[],d=!1;function l(t){var e={element:t.element,position:t.position,top:t.position.top,left:t.position.left,cssPosition:t.element.style.position,cssLeft:t.element.style.left?parseInt(t.element.style.left.substring(0,t.element.style.left.length-2)):0,cssWidth:t.element.style.width,cssTop:t.element.style.top,cssTextAlign:t.element.style.textAlign,cssMargin:t.element.style.margin,cssZIndex:t.element.style.zIndex,parent:t.element.parentNode,stickyOffsetTop:t.config.topOffset,bottomThreshold:t.config.bottomHeight,stickyZIndex:t.config.zindex,isSticky:!1,isAtBottom:!1,closed:!1,isTracking:t.isTrackingUnit};a[t.id]=e,u(),t.updateViewState(r.getViewport())}function u(){var e=r.getViewport(),i=r.getDocumentHeight();r.foreach(a,function(t){t=a[t];t.isSticky||t.isAtBottom||(t.top=t.position.absTop,t.left=t.position.left),t.closed||(t.isSticky&&e.top+t.stickyOffsetTop<=t.top&&(t.element.style.position=t.cssPosition,t.element.style.left=t.cssLeft+"px",t.element.style.top=t.cssTop,t.element.style.width=t.cssWidth,t.element.style.textAlign=t.cssTextAlign,t.element.style.margin=t.cssMargin,t.isTracking||(t.element.style.zIndex=t.cssZIndex),t.isSticky=!1,t.isAtBottom=!1),t.isSticky&&i-e.top-t.stickyOffsetTop-t.position.height<t.bottomThreshold?(t.element.style.position="fixed",t.element.style.top="",t.element.style.bottom=t.bottomThreshold+"px",t.isTracking||(t.element.style.zIndex=t.stickyZIndex||"2147483647"),t.isSticky=!1,t.isAtBottom=!0):!t.isSticky&&e.top+t.stickyOffsetTop>t.top&&i-e.top-t.stickyOffsetTop-t.position.height>=t.bottomThreshold&&(t.element.style.position="fixed",t.element.style.bottom="",t.element.style.left=t.left+"px",t.element.style.top=t.stickyOffsetTop+"px",t.element.style.margin="0px",t.isTracking||(t.element.style.zIndex=t.stickyZIndex||"2147483647"),t.isSticky=!0,t.isAtBottom=!1))})}function p(){r.foreach(a,function(t){for(var t=a[t],e=t.parent.offsetLeft+t.cssLeft,i=t.parent;"HTML"!==i.nodeName&&i.offsetParent;)e+=(i=i.offsetParent).offsetLeft;t.position.left=e,t.isSticky&&(t.element.style.left=e+"px")})}function g(t){s.config.device!==n.DeviceType.Mobile&&t.type===n.AdUnitType.sticky&&(d?l(t):c.push(t))}function h(t){d||-1<(t=c.indexOf(t))&&c.splice(t,1)}i.start=function(){o.listen(18,g),o.listen(19,h),o.listen(2,p),window.addEventListener("scroll",u),o.listen(8,function(){for(d=!0;0<c.length;)l(c.pop())})}},{"../../common/EventManager":4,"../../common/Parameters":5,"../../common/Utilities":7,"../../interfaces/Enums":9}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Verification=void 0;var n=t("../../common/EventManager"),o=t("../PlacementManager");function s(t){this.init(t)}s.prototype.init=function(t){this.container=document.createElement("div"),this.container.setAttribute("id",s.VerificationTag),this.container.style.width="1px",this.container.style.height="1px",this.container.style.display="none",document.body.appendChild(this.container),this.id=o.createAdUnit({id:t,element:this.container,scriptWindow:window,window:window})},s.prototype.delete=function(){this.container.parentElement===document.body&&document.body.removeChild(this.container),n.unlisten(21,this.bannerChangedHandler);var t=o.getAdUnit(this.id);t&&t.delete()},s.prototype.serveTag=function(){var t=document.createElement("script");t.async=!0,t.setAttribute("data-ad-client",s.AdsTagCode),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",document.getElementsByTagName("head")[0].appendChild(t)},s.prototype.bannerChangedHandler=function(t){var e;t.id===this.id&&(!(e=t.getCurrentEntry())||e.isEmpty()?this.delete():(this.serveTag(),t.disableRotation()))},s.log=function(t){},s.removeElements=function(t,e){t.parentNode&&t.parentNode.removeChild(t),s.searchForMainElement()},s.waitForInnerFrame=function(e,i){var n=window.setInterval(function(){var t;i.contentDocument&&(t=i.contentDocument.body.querySelector("iframe"))&&0<(t.src||"").indexOf(s.AdsCode)&&(s.removeElements(e,2),window.clearInterval(n))},10)},s.checkRenderedScenario=function(e){var i=window.setInterval(function(){var t=e.querySelector("iframe");t&&(window.clearInterval(i),0<(t.src||"").indexOf(s.AdsCode)?s.removeElements(e,1):s.waitForInnerFrame(e,t))},10)},s.searchForMainElement=function(){s.mainInterval=window.setInterval(function(){var t=document.querySelector("html > ins.adsbygoogle");t&&(window.clearInterval(s.mainInterval),s.checkRenderedScenario(t))},10)},s.create=function(t,e){this.instance=new s(parseInt(t)),n.listen(21,this.instance.bannerChangedHandler.bind(this.instance))},s.render=function(t){"string"==typeof t&&0<t.indexOf(s.VerificationTag)&&!(0<s.mainInterval)&&s.searchForMainElement()},s.VerificationTag="iat-verification",s.AdsTagCode="ca-pub-"+(s.AdsCode="2329337138110868"),s.mainInterval=0,i.Verification=s},{"../../common/EventManager":4,"../PlacementManager":20}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MawManager=void 0;var s=t("../common/Utilities"),r=t("./PlacementManager");function n(){}n.start=function(){window.addEventListener("message",n.onMessageReceived,!1)},n.onMessageReceived=function(t){if(t&&t.data&&t.data.type){var e=t.data;switch(e.type){case"iat-maw-registration-request":e.uniqueId&&e.mawId&&n.registrationResponse(e.uniqueId);break;case"iat-maw-registration-acknowledge":e.uniqueId&&e.mawId&&e.adUnitId&&n.registrationAcknowledge(e.mawId,e.adUnitId)}}},n.registrationResponse=function(t){n.broadcastToAllAdUnits({type:"iat-maw-registration-response",uniqueId:t,domain:s.BrowserUtils.getTopMostHostname()})},n.registrationAcknowledge=function(t,e){var e=r.getAdUnit(e);e&&(e=e.getCurrentEntry())&&e.setMawId(t,!0)},n.broadcastToAllAdUnits=function(n){var o=this;r.getAdUnits().forEach(function(t){var e,i=t.getCurrentEntry();if(i&&i.currentFrame&&i.currentFrame.contentWindow)e=i.currentFrame;else{var i=t.element.getElementsByTagName("iframe");if(0===i.length)return;e=i[0]}e&&e.contentWindow&&(n.adUnitId=t.id,(i=(0,s.getFrameSize)(e))&&(n.width=i.width,n.height=i.height),o.nestedPostMessage(e.contentWindow,n))})},n.nestedPostMessage=function(t,e,i){if(void 0===i&&(i=0),t){t.postMessage(e,"*");for(var n=0;n<t.frames.length;n++)this.nestedPostMessage(t.frames[n],e,i+1)}},i.MawManager=n},{"../common/Utilities":7,"./PlacementManager":20}],19:[function(t,e,i){"use strict";function n(t){this.placementManager=t}Object.defineProperty(i,"__esModule",{value:!0}),i.PassbackManager=void 0,n.prototype.start=function(){window.addEventListener("message",this.messageListener.bind(this))},n.prototype.messageListener=function(t){t=t.data;t&&t.type&&t.adUnitId&&t.model&&"iat-passback"===t.type&&this.processPassback(t)},n.prototype.processPassback=function(t){var e=this,i=this.placementManager.getAdUnit(t.adUnitId);i&&(i.slot?(i.addTargetingMap(t.model.ct),i.isIntegration?this.createNewEntry(i):this.proceedToNextEntry(i)):window.setTimeout(function(){return e.processPassback(t)},100))},n.prototype.proceedToNextEntry=function(t){t=t.getCurrentEntry();t&&t.passback()},n.prototype.createNewEntry=function(t){t.isFirstPrint=!0,t.enableRotation(),t.nextBanner({tag:"passback",ignoreDoNotRotate:!0})},i.PassbackManager=n},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PlacementManagerAPI=i.start=i.setIgnoreNextServerAppRotation=i.getIgnoreNextServerAppRotation=i.getPersistentIndex=i.updatePersistentIndex=i.getAdUnit=i.deleteHouseAdUnits=i.deleteAdUnit=i.createAdUnit=i.getAdUnits=void 0;var o,n,s,r=t("./../common/Parameters"),a=t("./../common/EventManager"),c=t("./BrowserStateTracker"),d=t("./classes/AdUnit"),l=t("./../interfaces/Enums"),u=t("./../common/Utilities"),p=t("./../common/Timers"),g=t("./realtime-messaging/Types"),h=t("./realtime-messaging/RealtimeMessaging"),f=t("../modules/API"),m=5,y={},v={},w=(b.getInfo=function(t){if(t.dfpMapping&&t.dfpMapping.eid&&v[t.dfpMapping.eid])return v[t.dfpMapping.eid]},b.addAndGetInfo=function(t){if(t.dfpMapping&&t.dfpMapping.eid)return v[t.dfpMapping.eid]||(v[t.dfpMapping.eid]=new b(t.dfpMapping)),v[t.dfpMapping.eid]},b);function b(t){this.uniqueId=t.eid,this.index=0,this.ignoreNextServerAppRotation=!1,this.lastMawCapTimestamp=0}function I(){var e=[];return(0,u.foreach)(y,function(t){return e.push(U(t))}),e}function S(t){var e,i,n;return!t.id||(e=(r.config.znl||{})[t.id.toString()]||{}).dc&&-1===e.dc.toLowerCase().indexOf(l.DeviceType[r.config.device].toLowerCase())?"":(i=-1,n=new RegExp("^"+t.id+"\\.(\\d+)$"),(0,u.foreach)(y,function(t){t=n.exec(t);t&&(i=Math.max(i,parseInt(t[1])))}),t=new d.AdUnit(t,e,++i),y[t.id]=t,r.config.dads&&t.disableRotation(),a.emit(18,t),t.id)}function M(t){var e;t.adUnitId&&(t=U(t.adUnitId))&&(e=t.getCurrentEntry())&&e.iatOlId&&(e.isPublisherMarket()||(t.onServerRotation(),e.buildNewImpressionLoggingRequest()))}function C(t){var e,i;t.adUnitId&&(e=U(t.adUnitId))&&(i=e.getCurrentEntry())&&i.mawId&&i.mawId===t.mawId&&(!function(t){t=w.addAndGetInfo(t);if(t){var e=+new Date;if(e-t.lastMawCapTimestamp<=1e3*m)return;t.lastMawCapTimestamp=e}return 1}(e)||e.onMawRotation(i.mawId))}function T(){p.clear(n),n=p.timeout(function(){var n=new g.StatusData(c.getCurrentState());(0,u.foreach)(y,function(t){var e,i=U(t);i.isInternal||(e=i.isInView(),i.isTrackingUnit?n.trackingUnits.push(t+(e?":1":":0")):(i=i.getCurrentEntry(),n.adUnits.push(t+(e?":1":":0")),n.iatCreatives.push(i&&i.iatCId?i.iatCId.toString():""),n.iatOrderLines.push(i&&i.iatOlId?i.iatOlId.toString():""),n.impressionSlots.push(i?i.index:0),n.sizes.push(i?i.getServedSize():""),n.mawIds.push(i?i.getMawIdForSnap():""),n.lineItemIds.push(i&&i.lineItemId?i.lineItemId.toString():""),n.creativeIds.push(i&&i.creativeId?i.creativeId.toString():"")))}),h.RealtimeMessaging.sendStatusUpdate(n),p.clear(o),o=p.interval(function(){return h.RealtimeMessaging.sendStatusUpdate(n)},s)},100)}function E(){var e=!1,i=(0,u.getViewport)();(0,u.foreach)(y,function(t){return e=U(t).updateViewState(i)||e}),e&&T()}function A(t){var e=U(t);delete y[t],e&&a.emit(19,e)}function P(){I().filter(function(t){return!t.isIntegration}).forEach(function(t){return t.delete()})}function U(t){return y[t]}i.getAdUnits=I,i.createAdUnit=S,i.deleteAdUnit=A,i.deleteHouseAdUnits=P,i.getAdUnit=U,i.updatePersistentIndex=function(t,e){(t=w.addAndGetInfo(t))&&(t.index=e)},i.getPersistentIndex=function(t){return(t=w.getInfo(t))?t.index:0},i.getIgnoreNextServerAppRotation=function(t){return!!(t=w.getInfo(t))&&t.ignoreNextServerAppRotation},i.setIgnoreNextServerAppRotation=function(t,e,i){(t=w.getInfo(t))&&(t.ignoreNextServerAppRotation=e)},i.start=function(){if(f.extend(f.ApiModule.PlacementManager,new x),window.__tgunits)for(var t=window.__tgunits.length;-1<--t;)S(window.__tgunits[t]);window.__tgunits={push:S,length:0},s=1e3*(r.config.mpi||30),a.listen(1,E),a.listen(2,E),a.listen(17,T),a.listen(11,T),a.listen(21,T),a.listen(19,T),a.listen(13,M),a.listen(14,C)};k.prototype.getAdUnits=I,k.prototype.createAdUnit=S,k.prototype.deleteAdUnit=function(t){A(t)},k.prototype.deleteHouseAdUnits=function(){P()},k.prototype.getAdUnit=U;var x=k;function k(){}i.PlacementManagerAPI=x},{"../modules/API":10,"./../common/EventManager":4,"./../common/Parameters":5,"./../common/Timers":6,"./../common/Utilities":7,"./../interfaces/Enums":9,"./BrowserStateTracker":11,"./classes/AdUnit":24,"./realtime-messaging/RealtimeMessaging":33,"./realtime-messaging/Types":34}],21:[function(t,e,i){"use strict";function n(t){this.eventManager=t,this.adUnitAnalyticsMap={}}Object.defineProperty(i,"__esModule",{value:!0}),i.RotationRulesAnalyticsManager=void 0,n.start=function(t){this.instance=new n(t),this.instance.eventManager.listen(18,this.instance.onCreateAdUnit.bind(this.instance)),this.instance.eventManager.listen(19,this.instance.onRemoveAdUnit.bind(this.instance))},n.getRotationRulesPotentials=function(t,e){t=this.instance.adUnitAnalyticsMap[t];return t?t.getRulesToEmit(e).map(function(t){return t.ruleId}):[]},n.prototype.onCreateAdUnit=function(t){var e;t.dfpMapping&&t.dfpMapping.analytics&&t.dfpMapping.analytics.length&&(e=t.dfpMapping.analytics.map(function(t){return new r(t.ruleId,t.impDur)}),this.adUnitAnalyticsMap[t.uniqueId]=new o(e))},n.prototype.onRemoveAdUnit=function(t){this.adUnitAnalyticsMap[t.uniqueId]&&delete this.adUnitAnalyticsMap[t.uniqueId]},i.RotationRulesAnalyticsManager=n;s.prototype.getRulesToEmit=function(e){return this.rules.filter(function(t){return t.shouldEmit(e)})};var o=s;function s(t){this.rules=t}a.prototype.shouldEmit=function(t){t=Math.floor(t/this.impressionDuration)>this.currentPotentialRotation;return t&&(this.currentPotentialRotation++,1===this.currentPotentialRotation)&&(this.impressionDuration+=1e3*a.RoundTripDelay),t},a.DefaultImpressionDuration=20,a.RoundTripDelay=2;var r=a;function a(t,e){this.ruleId=t,this.currentPotentialRotation=0,this.impressionDuration=1e3*(e||a.DefaultImpressionDuration)}},{}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SinglePageApplicationManager=void 0;var n=t("../common/Parameters"),o=t("../modules/PlacementManager"),s=t("../common/Utilities"),r=t("../common/Timers");function a(t){this.eventManager=t}a.prototype.start=function(){n.config.lastScrollTime=0,this.previousUrl=s.BrowserUtils.getTopMostPageUrl(),r.interval(this.checkLocationChanged.bind(this),200),window.addEventListener("scroll",this.updateLastScroll.bind(this))},a.prototype.checkLocationChanged=function(){var t=s.BrowserUtils.getTopMostPageUrl();this.previousUrl!==t&&(this.previousUrl=t,this.performInitRequest())},a.prototype.isScrolling=function(){var t=(new Date).getTime();return n.config.lastScrollTime&&t<n.config.lastScrollTime+500},a.prototype.updateLastScroll=function(){n.config.lastScrollTime=(new Date).getTime()},a.prototype.performInitRequest=function(){var e=this,t=n.config.rootPath+"/init?appId="+n.config.publicId+"&h="+encodeURIComponent(s.BrowserUtils.getTopMostPageUrl())+"&ls=0&t="+ +new Date;s.BrowserUtils.buildRequestByUrl(document.body,t,function(t){e.processInitResponse(t.__tgconf),window.top&&window.top.__tginitcb&&window.top.__tginitcb()})},a.prototype.processInitResponse=function(t){t&&(t.section===n.config.section&&this.isScrolling()||o.deleteHouseAdUnits(),n.updateConfiguration(t),this.eventManager.emit(8,null))},i.SinglePageApplicationManager=a},{"../common/Parameters":5,"../common/Timers":6,"../common/Utilities":7,"../modules/PlacementManager":20}],23:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ApsIntegration=void 0;var n=t("../tcf/tcf"),o=t("../../common/Utilities"),s=t("../../common/Timers");function r(){}r.getInstance=function(){return r.instance=r.instance?r.instance:new r},r.load=function(t){n.TcfIntegration.gdprApplies()&&o.BrowserUtils.attachScriptToElement("/iat-tcf-api-proxy.js",t.window.document.head,!1),r.getInstance().loadAps(t.window)},r.prototype.loadAps=function(t){var e=t.document.createElement("script");e.innerText='!function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");',t.document.getElementsByTagName("head")[0].appendChild(e),t.apstag.init({pubID:"6f354287-be81-4032-bf64-3a62262fb72f",adServer:"googletag"})},r.bid=function(t,e){n.TcfIntegration.gdprApplies()?r.getInstance().waitForTcfToMakeBidRequest(t,e):r.getInstance().makeBidRequest(t,e)},r.prototype.waitForTcfToMakeBidRequest=function(i,n){var o,t=this;i.window.__tcfapi?(o=this,i.window.__tcfapi("addEventListener",2,function(t,e){!e||"useractioncomplete"!==t.eventStatus&&"tcloaded"!==t.eventStatus||o.makeBidRequest(i,n)})):s.timeout(function(){return t.waitForTcfToMakeBidRequest(i,n)},0)},r.prototype.makeBidRequest=function(e,i){e.window.apstag.fetchBids({slots:[{slotID:e.slot.getSlotElementId(),slotName:e.slot.getAdUnitPath(),sizes:e.sizes}],timeout:r.BID_TIMEOUT},function(t){switch((0<t.length?t[0]:{amznbid:"2"}).amznbid){case"0":case"1":case"2":i(!1);break;default:e.window.googletag.cmd.push(function(){e.window.apstag.setDisplayBids(),i(!0)})}})},r.BID_TIMEOUT=2e3,i.ApsIntegration=r},{"../../common/Timers":6,"../../common/Utilities":7,"../tcf/tcf":35}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AdUnit=void 0;var r=t("../../interfaces/Enums"),s=t("../BrowserStateTracker"),v=t("../../common/Utilities"),o=t("../../common/Timers"),a=t("../../common/Parameters"),c=t("../../common/EventManager"),n=t("../PlacementManager"),d=t("./Entry"),l=t("../../common/Utilities"),u=t("../realtime-messaging/RealtimeMessaging"),p=t("../dfp/utils"),g=t("../RotationRulesAnalyticsManager"),h=t("../API");function f(t,e,i){this.currentEntryIndex=-1,this.rotateIndexOnView=-1,this.queue=[],this.stickyHookTimer=0,this.hovering=!1,this.timeInView=0,this.pctInView=0,this.visibilityThreshold=50,this.potImpCompleted=!1,this.potIabCompleted=!1,this.potRotation=0,this.handleNextReEngagement=!1,this.stateChangeHandler=this.onStateChange.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.publisherBlankHandler=this.onPublisherBlank.bind(this),this.evaluateNoRefreshCreativeHook(t),this.id=t.id+"."+i,this.config=e.conf,this.adUnitId=t.id.toString(),this.type=e.type?r.AdUnitType[e.type]:r.AdUnitType.normal,this.element=t.element,this.parentElement=t.element.parentElement,this.ct=t.ct||{},this.sasKeywords="",this.sasTagId="",this.sizes=t.sizes||[],this.scriptWindow=t.scriptWindow,this.unitWindow=t.window,this.isTrackingUnit=e.tu||!1,this.isFirstPrint=e.fp||t.firstPrint||!1,this.rotateOnClient=!this.isFirstPrint,this.dnr=t.dnr||!1,this.isIntegration=t.dfpAdUnit||t.sasAdUnit||!1,this.rotating=!1,this.lastTick=+new Date,this.isPositionSticky="sticky"===window.getComputedStyle(this.element).position,this.impressionDuration=1e3*(a.config.pid||20),t.impDur&&0<t.impDur&&(this.impressionDuration=1e3*t.impDur),this.position={width:0,height:0,top:0,left:0,absTop:0},t.ruleId&&(this.ct["iat-rotation-rule"]=[t.ruleId.toString()]),this.uniqueId=v.CryptoUtils.generateUniqueId(),this.init(t)}f.prototype.evaluateNoRefreshCreativeHook=function(t){if(a.config.noRefreshCreativeContent)try{var e=t.element.querySelector("iframe");e&&e.contentDocument&&new String(e.contentDocument.body.innerHTML).includes(a.config.noRefreshCreativeContent)&&(t.dnr=!0,t.dnrReason=["Blocked by creative content"])}catch(t){}},Object.defineProperty(f.prototype,"doNotRotate",{get:function(){var t=this.getCurrentEntry();return this.dnr||t&&t.dnr||!1},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isInternal",{get:function(){return this.type===r.AdUnitType.verification},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"logPotentials",{get:function(){return!this.isInternal},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"logPotentialRotations",{get:function(){return this.logPotentials&&!a.config.dads&&this.potIabCompleted},enumerable:!1,configurable:!0}),f.prototype.getCurrentEntry=function(){return this.queue[this.currentEntryIndex]},f.prototype.disableRotation=function(){this.dnr=!0},f.prototype.enableRotation=function(){this.dnr=!1},f.prototype.logPotentialImpression=function(){this.logPotentials&&(u.RealtimeMessaging.sendPotentialLog({type:1,id:this.adUnitId,isTracking:this.isTrackingUnit}),this.potImpCompleted=!0)},f.prototype.delete=function(){n.deleteAdUnit(this.id),c.unlisten(17,this.stateChangeHandler),a.config.device===r.DeviceType.Desktop&&(this.element.removeEventListener("mouseover",this.mouseOverHandler),this.element.removeEventListener("mouseout",this.mouseOutHandler)),this.timerCountHandler&&(o.clear(this.timerCountHandler),this.timerCountHandler=void 0)},f.prototype.isInView=function(){return this.pctInView<this.visibilityThreshold?r.UnitViewState.NotVisible:r.UnitViewState.Visible},f.prototype.updateThreshold=function(t,e){this.visibilityThreshold=242500<=t*e?30:50},f.prototype.updateViewState=function(t){var e=0,i=0,n="",o=v.getElementSize(this.element),s=!1;do{try{for(var r,a,c,d,l,u=(c=a?(a=(r=a).parent,r.frameElement):(a=this.unitWindow,this.element)).getBoundingClientRect(),p=c,g=void 0,h=p.ownerDocument.defaultView.getComputedStyle(p),f=p.getBoundingClientRect();"HTML"!==p.nodeName&&p.parentNode&&!n;){if(p===g&&(g=void 0),!h||"none"!==h.display&&"hidden"!==h.visibility||(s=!0),g||(d=(u.top<f.top?f.top-u.top:0)+(u.bottom>f.bottom?u.bottom-f.bottom:0),"hidden"===h.overflowY&&.5<d/u.height&&(s=!0),l=(u.left<f.left?f.left-u.left:0)+(u.right>f.right?u.right-f.right:0),"hidden"===h.overflowX&&.5<l/u.width&&(s=!0)),h&&"fixed"===h.position)break;g=g||(h&&"absolute"===h.position?p.offsetParent:null),h=(p=p.parentNode).ownerDocument.defaultView.getComputedStyle(p),f=p.getBoundingClientRect()}e+=u.top,i+=u.left}catch(t){n="frames"}}while(a!==window&&!s);var m=s?0:0<=e&&e+o.height<=t.height&&0<=i&&i+o.width<=t.width?100:(!(e+o.height<0||e>t.height)||!(i+o.width<0||i>t.width))&&(m=o.height,e<0&&(m+=e),e+o.height>t.height&&(m+=t.height-e-o.height),y=o.width,i<0&&(y+=i),i+o.width>t.width&&(y+=t.width-i-o.width),Math.round(Math.max(0,m)*Math.max(y)/(o.height*o.width)*100))||0,y=this.isInView(),o=(this.position.width=o.width,this.position.height=o.height,this.position.top=e,this.position.left=i,this.position.absTop=e+t.top,this.isInternal?this.pctInView=100:this.pctInView=n?0:m,y!==this.isInView());return o&&this.onStateChange(),o},f.prototype.onStateChange=function(){var t=this.getCurrentEntry();c.emit(20,this),s.getCurrentState()===r.BrowserState.Active||this.handleNextReEngagement||(this.handleNextReEngagement=!0),this.isInView()&&s.getCurrentState()===r.BrowserState.Active?!(-1<this.rotateIndexOnView)||this.hovering&&t?t&&t.startViewableLoggingTimer():this.loadNextSlot(this.rotateIndexOnView):this.isInView()&&s.getCurrentState()===r.BrowserState.Active||t&&t.stopViewableLoggingTimer()},f.prototype.onPublisherBlank=function(t){this.id===t&&(t=this.getCurrentEntry())&&t.passback()},f.prototype.isReferenceValid=function(){try{if(!this.element||!this.element.parentNode||!this.scriptWindow||!this.scriptWindow.document||!this.scriptWindow.document.contains(this.element)&&!document.contains(this.element)||!this.scriptWindow.top||this.unitWindow!==this.scriptWindow&&this.scriptWindow===this.scriptWindow.parent)return this.delete(),!1}catch(t){return!1}return!0},f.prototype.timeCounter=function(){var t,e,i;!this.isReferenceValid()||(t=+new Date)-this.lastTick<450||(this.isInView()&&r.BrowserState.Active===s.getCurrentState()&&(this.timeInView+=600<t-this.lastTick?600:t-this.lastTick,this.logPotentials&&this.potImpCompleted&&!this.potIabCompleted&&1e3<this.timeInView&&(u.RealtimeMessaging.sendPotentialLog({type:2,id:this.adUnitId,isTracking:this.isTrackingUnit}),this.potIabCompleted=!0),this.logPotentialRotations&&Math.floor(this.timeInView/this.impressionDuration)>this.potRotation&&(u.RealtimeMessaging.sendPotentialLog({type:3,id:this.adUnitId,isTracking:this.isTrackingUnit}),this.potRotation++),this.logPotentialRotations&&this.isIntegration&&0<(e=g.RotationRulesAnalyticsManager.getRotationRulesPotentials(this.uniqueId,this.timeInView)).length&&(i=this.dfpMapping&&this.dfpMapping.dfpAdUnit?"dfp":"sas",u.RealtimeMessaging.sendPotentialLog({type:4,id:this.adUnitId,rules:{type:i,ruleIds:e}})),this.isTrackingUnit||(this.handleNextReEngagement&&s.minimumDurationForReEngagementReached()&&this.potIabCompleted&&(this.timeInView=this.impressionDuration+1,this.handleNextReEngagement=!1,this.rotateOnClient=!this.doNotRotate,n.setIgnoreNextServerAppRotation(this,this.rotateOnClient,"fast forward")),this.rotateOnClient&&this.timeInView>this.impressionDuration&&(this.rotateOnClient=!1,this.nextBanner({tag:"client"})))),this.lastTick=t)},f.prototype.onServerRotation=function(){n.getIgnoreNextServerAppRotation(this)?n.setIgnoreNextServerAppRotation(this,!1,"server:app discarded"):this.nextBanner({tag:"server:app"})},f.prototype.onMawRotation=function(t){},f.prototype.nextBanner=function(t){var e=!!t&&t.ignoreDoNotRotate;this.doNotRotate&&!e||this.rotating||(this.rotating=!0,e=!!t&&t.ignoreInViewRequisite,e=new d.Entry(this,this.queue.length,!1,e),this.queue.push(e),n.updatePersistentIndex(this,e.index),this.evaluateStickyHook(),this.requestAd(e,t&&t.mawId))},f.prototype.getMetaKeys=function(){var t={},e=document.querySelector?document.querySelector("meta[name='iat-targeting']"):null;if(e)for(var i=e.content.replace(/\'/g,"").split(";"),n=i.length-1;-1<n;n--){var o=i[n].split("=");o[1]&&(t[o[0].toLowerCase()]=o[1].split("&"))}return t},f.prototype.getDfpPageKeys=function(){var e,i,t=a.config.integrations.dfp,n=t&&t.keyValues;return n&&n.length&&(t=p.DfpUtils.getGptWindow(this.unitWindow),p.DfpUtils.isGptAvailable(t))?(e={},(i=t.googletag.pubads()).getTargetingKeys().filter(function(t){return 0<=n.indexOf(t)}).forEach(function(t){return e[t]=i.getTargeting(t)}),e):{}},f.prototype.getCustomTarget=function(){var t,e=v.extendCustomTargeting(this.getMetaKeys(),this.ct),i=(this.dfpMapping&&this.dfpMapping.ct&&(e=v.extendCustomTargeting(e,this.dfpMapping.ct)),{});for(t in e=v.extendCustomTargeting(e,this.getDfpPageKeys()))t.startsWith("hb_")||(i[t]=e[t]);return i},f.prototype.addTargetingMap=function(t){t&&this.slot&&(this.ct=v.extendCustomTargeting(this.ct,t),t=v.extendCustomTargeting(this.slot.getTargetingMap(),t),this.slot.updateTargetingFromMap(t))},f.prototype.getCreativeSize=function(){var t,e=[];return this.sizes&&0<this.sizes.length?e=this.sizes[0]:(t=this.getCurrentEntry())&&-1<t.iatCw&&-1<t.iatCh&&(e=[t.iatCw,t.iatCh]),e},f.prototype.evaluateStickyHook=function(){var t,e,i=this,n=a.config.stickyCloseButton;n&&(t=this.element&&this.element.parentElement)&&t.id===n.slotDomElementId&&(e=t.querySelector(n.cssSelector))&&(v.setCssProperty(e,"display","none","important"),n.timeout)&&(o.clear(this.stickyHookTimer),this.stickyHookTimer=o.timeout(function(){t&&i.isReferenceValid()&&v.setCssProperty(e,"display","block","important")},1e3*n.timeout))},f.prototype.getDeliveryMode=function(t){return this.isFirstPrint&&(0===t.index||this.queue.filter(function(t){return t.state===r.EntryState.Blank}).length===this.queue.length-1)?1:2},f.prototype.requestAd=function(i,t){var n=this,e=a.config.rootPath+"/ad?auid="+this.adUnitId+"&csz="+encodeURIComponent(JSON.stringify(this.getCreativeSize()))+"&sz="+encodeURIComponent(JSON.stringify(this.sizes))+"&appId="+a.config.appId+"&s="+a.config.section+"&dm="+this.getDeliveryMode(i)+"&is="+i.index+"&ct="+encodeURIComponent(JSON.stringify(this.getCustomTarget()))+"&h="+encodeURIComponent(l.BrowserUtils.getTopMostPageUrl())+"&sid="+a.config.sessionId+"&v="+a.config.version+"&rv=1&ts="+ +new Date+"",o=((this.sasKeywords||this.sasTagId)&&(e+="&sasKeywords="+encodeURIComponent(this.sasKeywords)+"&sasTagId="+this.sasTagId),this.getCurrentEntry()),s=(o&&o.iatOlId&&0<o.iatOlId&&(e+="&ll="+o.iatOlId),t&&0<t&&!1);s&&(e+="&mawId="+t,this.dfpMapping)&&void 0!==this.dfpMapping.mawSlot&&(i.monetizingMawSlot=this.dfpMapping.mawSlot,this.dfpMapping.mawSlot=void 0),l.BrowserUtils.buildRequestByUrl(document.body,e,function(t){var e=t._tg,t=t._tgblk;e&&Array.isArray(e)?i.updateWithResponse(e,t):i.updateWithBlankResponse(t),i.state===r.EntryState.Blank?(n.onBlank(i),n.currentEntryIndex=i.index):i.index===n.queue.length-1&&(n.loadNextSlot(i.index),s)&&(n.dnr=!1)})},f.prototype.loadNextSlot=function(t){var e=this.getCurrentEntry(),i=this.queue[t],n=this.isInView()&&s.getCurrentState()===r.BrowserState.Active,o=e&&this.hovering;i.ignoreInViewRequisite||n&&!o?i.loadNextCreative()?(this.rotating=!1,this.currentEntryIndex=i.index,c.emit(21,this),e&&e.stopViewableLoggingTimer(),i.buildStdImpressionLoggingRequest(),i.startViewableLoggingTimer(),this.rotateIndexOnView=-1):this.onBlank(i):this.rotateIndexOnView=t},f.prototype.resizeContainer=function(t,e,i){v.tryParseInt((this.element.style.width||"").replace("px",""))<t&&(this.element.style.width=t+"px"),v.tryParseInt((this.element.style.height||"").replace("px",""))<e&&(this.element.style.height=e+"px"),this.updateThreshold(t,e),i&&this.removeAllHiddenChildren()},f.prototype.showPriorEntry=function(){for(var t=this.queue.length-2;-1<t;t--){var e=this.queue[t];if(e.state!==r.EntryState.Blank&&e.currentFrame)return void this.updateElementVisibility(e.currentFrame,!0,!1,!0)}var i=this.element.querySelector(":scope > iframe:not([iat-slot])");i&&this.updateElementVisibility(i,!0,!0,!0)},f.prototype.removeAllHiddenChildren=function(){var e=this;try{this.element.querySelectorAll(":scope > .iat-hidden").forEach(function(t){return e.element.removeChild(t)})}catch(t){}},f.prototype.updateElementVisibility=function(t,e,i,n){e?(v.setCssProperty(t,"display",i?"":"block",i?"":"important"),v.removeClass(t,"iat-hidden")):(v.setCssProperty(t,"display","none","important"),v.addClass(t,"iat-hidden")),n&&this.removeAllHiddenChildren()},f.prototype.changeVisibleSlot=function(t){if(!this.isInternal){if(0<=this.currentEntryIndex){for(var e,i=this.element.childNodes,n=i.length;-1<--n;)(o=i[n]).getAttribute&&(e=o.getAttribute("class"),"none"===o.style.display||e&&-1!==e.split(" ").indexOf("tg-overlay")||this.updateElementVisibility(o,!1));if(this.slot&&this.parentElement)for(var o,s=this.parentElement.childNodes,n=s.length;-1<--n;)(o=s[n])!==this.element&&o.tagName&&"iframe"===o.tagName.toLowerCase()&&this.updateElementVisibility(o,!1)}this.updateElementVisibility(t.currentFrame,!0)}},f.prototype.onBlank=function(t){this.rotating=!1,t.setBlank(),t.stopViewableLoggingTimer(),c.emit(21,this),t.buildBlankLoggingRequest(),this.showPriorEntry();var e=1<this.queue.length?this.queue[this.queue.length-2]:null,i=e&&e.mawId;(0===t.index||t.isPublisherMarket()||i)&&(this.rotateOnClient=!0,this.timeInView=0,this.potRotation=0),i&&e&&e.copyMawContext(t)},f.prototype.onMouseOver=function(){this.hovering=!0},f.prototype.onMouseOut=function(){this.hovering=!1,this.onStateChange()},f.prototype.loadDfpSlotInfo=function(t){(this.dfpMapping=t).ct=this.slot.getTargetingMap();var t=[t.cw,t.ch],e=p.DfpUtils.getNumericSlotSizes(this.slot);this.sizes=v.getSlotSizesForDevice(e,t),this.updateThreshold(t[0],t[1])},f.prototype.loadDfpCreative=function(t){if(this.slot=this.unitWindow.googletag.pubads().getSlotIdMap()[p.DfpUtils.getSlotId(this.element)],this.loadDfpSlotInfo(t),!this.isFirstPrint){for(var e=n.getPersistentIndex(this);e--;)this.queue.push(new d.Entry(this,++this.currentEntryIndex));var i=new d.Entry(this,++this.currentEntryIndex);this.rotateOnClient=!t.dnr,i.setMawData(t),this.queue.push(i),this.currentEntryIndex=i.index,c.emit(21,this),this.onStateChange()}},f.prototype.loadSasCreative=function(t){if(this.dfpMapping=t,this.sizes=[[t.cw,t.ch]],t.tagId&&(i=(i=h.get(h.ApiModule.SAS))?i.getPrintedInformationForTag(t.tagId):void 0)&&(this.sasKeywords=encodeURIComponent(i.keywords),this.sasTagId=i.tagId),!this.isFirstPrint){for(var e=t.slot;e--;)this.queue.push(new d.Entry(this,++this.currentEntryIndex));var i=new d.Entry(this,++this.currentEntryIndex);this.rotateOnClient=!t.dnr,this.queue.push(i),this.currentEntryIndex=i.index,c.emit(21,this),this.onStateChange()}},f.prototype.loadDfpCreativeOnAdhesion=function(t){var e;t.element.firstElementChild&&t.element.ownerDocument&&t.element.ownerDocument.defaultView&&(e=t.element.ownerDocument.defaultView,this.slot=e.googletag.pubads().getSlotIdMap()[p.DfpUtils.getSlotId(t.element.firstElementChild)],this.loadDfpSlotInfo(t),this.timeInView=0,this.potRotation=0,this.dnr=t.dnr||!1,t.impDur&&0<t.impDur&&(this.impressionDuration=1e3*t.impDur),this.rotateOnClient=!t.dnr,t.ruleId&&(this.ct["iat-rotation-rule"]=[t.ruleId.toString()]),(e=this.getCurrentEntry())&&(e.clearServedData(),e.setMawData(t)),c.emit(21,this),c.emit(18,this))},f.prototype.init=function(t){var e=v.getViewport();this.updateViewState(e),c.listen(17,this.stateChangeHandler),c.listen(22,this.publisherBlankHandler),this.element.setAttribute("tg-zone",this.id),a.config.device===r.DeviceType.Desktop&&(this.element.addEventListener("mouseover",this.mouseOverHandler),this.element.addEventListener("mouseout",this.mouseOutHandler)),t.dfpAdUnit?this.loadDfpCreative(t):t.sasAdUnit&&this.loadSasCreative(t),this.isTrackingUnit||(this.isFirstPrint?this.nextBanner({tag:"first",ignoreInViewRequisite:!t.eid}):0===this.queue.length&&this.queue.push(new d.Entry(this,++this.currentEntryIndex))),this.type===r.AdUnitType.bottom&&!this.isTrackingUnit||this.logPotentialImpression(),this.timerCountHandler=o.interval(this.timeCounter.bind(this),500)},i.AdUnit=f},{"../../common/EventManager":4,"../../common/Parameters":5,"../../common/Timers":6,"../../common/Utilities":7,"../../interfaces/Enums":9,"../API":10,"../BrowserStateTracker":11,"../PlacementManager":20,"../RotationRulesAnalyticsManager":21,"../dfp/utils":30,"../realtime-messaging/RealtimeMessaging":33,"./Entry":25}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Entry=void 0;var n=t("../../interfaces/Enums"),o=t("../BrowserStateTracker"),s=t("../../common/Timers"),r=t("../../common/Parameters"),a=t("../../common/EventManager"),c=t("../../common/Utilities"),d=t("../dfp/dfp-api"),l=t("../DynamicPlacements/Verification");function u(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1),this.waterfallEntries=[],this.isMawInit=!1,this.isFirstHouseRequest=void 0,this.nextCreativeIndex=0,this.viewableCompleted=!1,this.adUnit=t,this.index=e,this.ignoreInViewRequisite=n,i&&this.setBlank()}u.prototype.getMawIdForSnap=function(){var t;return this.mawId?(t=this.mawId+":"+(this.isMawInit?1:0),this.isMawInit=!1,t):""},u.prototype.setMawId=function(t,e){void 0===e&&(e=!1),t&&(this.mawId=t,this.isMawInit=0<t,e)&&a.emit(21,this.adUnit)},u.prototype.setMawData=function(t){this.servedWidth=t.cw,this.servedHeight=t.ch,this.lineItemId=t.lineItemId,this.creativeId=t.creativeId,this.setMawId(t.mawId)},u.prototype.getServedSize=function(){return 0<this.servedWidth&&0<this.servedHeight?this.servedWidth+"x"+this.servedHeight:"1x1"},u.prototype.copyMawContext=function(t){t.servedWidth=this.servedWidth,t.servedHeight=this.servedHeight,t.lineItemId=this.lineItemId,t.creativeId=this.creativeId,t.mawId=this.mawId},u.prototype.updateWithResponse=function(t,e){this.state=n.EntryState.Response,this.waterfallEntries=t,this.blankEntry=e},u.prototype.updateWithBlankResponse=function(t){this.state=n.EntryState.Blank,this.blankEntry=t},u.prototype.isEmpty=function(){return!this.iatOlId&&!this.adUnit.dfpMapping||this.state===n.EntryState.Blank},u.prototype.isServedByGpt=function(){return"pgam"===this.m||"hgam"===this.m},u.prototype.isPublisherMarket=function(){return"p"===this.ms},u.prototype.isHouseOrderMarket=function(t){return"house"===(t=t||this.m)},u.prototype.checkFirstHouseRequest=function(){this.isPublisherMarket()||(void 0===this.isFirstHouseRequest?this.isFirstHouseRequest=!0:this.isFirstHouseRequest=!1)},u.prototype.onAbortedRequest=function(){this.isPublisherMarket()||!0!==this.isFirstHouseRequest||(this.isFirstHouseRequest=void 0)},u.prototype.onProceedWithRequest=function(){this.isPublisherMarket()||(this.isFirstHouseRequest=!1)},u.prototype.setBlank=function(){this.state=n.EntryState.Blank,this.clearServedData()},u.prototype.clearServedData=function(){this.iatOlId=void 0,this.iatCId=void 0},u.prototype.passback=function(){this.currentFrame&&this.currentFrame.contentWindow&&this.currentFrame.contentWindow.postMessage("TG-SP","*")},u.prototype.passbackListener=function(t){try{"TG-SP"===t.data?(this.currentFrame.removeEventListener("message",this.passbackListener),this.loadNextCreative()&&a.emit(21,this.adUnit)):"click"===t.data.action&&window.open(this.clickUrl,"_blank")}catch(t){}},u.prototype.loadNextCreative=function(){var e=this,t=(this.currentFrame&&this.adUnit.updateElementVisibility(this.currentFrame,!1),this.waterfallEntries[this.nextCreativeIndex]);if(!t)return this.adUnit.onBlank(this),!1;this.nextCreativeIndex++;var i=(this.m||"").toLowerCase();return this.cd=t.cd,this.iid=t.iid,this.iatCh=t.ch,this.iatCw=t.cw,this.m=t.m.toLowerCase(),this.ms=t.ms.toLowerCase(),this.dnr=t.dnr,this.clickUrl=t.cu,i&&!this.isHouseOrderMarket(i)&&!this.isHouseOrderMarket()||(this.iatOid=t.oid,this.iatOlId=t.li,this.iatCId=t.ci),this.adUnit.isInternal?l.Verification.render(t.cd):(this.checkFirstHouseRequest(),i=document.createElement("iframe"),(this.currentFrame=i).src="about:blank",i.setAttribute("scrolling","no"),i.setAttribute("frameborder","no"),i.setAttribute("iat-market",this.m),i.setAttribute("iat-slot",this.index.toString()),c.setCssProperty(i,"border-width","0px"),c.setCssProperty(i,"overflow","visible"),c.setCssProperty(i,"display","none"),c.setCssProperty(i,"clear","both"),this.adUnit.isPositionSticky||(c.setCssProperty(i,"margin","0px auto"),c.setCssProperty(i,"text-align","center","important"),c.setCssProperty(i,"position","relative")),this.adUnit.element.appendChild(i),(t=i.contentDocument||(i.contentWindow?i.contentWindow.document:null))&&i.contentWindow&&(t.open("text/html","replace"),i.contentWindow.addEventListener("message",function(t){return e.passbackListener(t)}),this.isServedByGpt()||t.write("<html><head></head><body><script>"+this.cd+"<\/script></body></html>"),t.close(),c.setCssProperty(t.body,"margin","0px"),c.setCssProperty(t.body,"border","0px"),c.setCssProperty(t.body,"overflow","hidden"),this.isServedByGpt()?d.DfpIntegrationApi.render(this):this.resize(this.iatCw,this.iatCh)),this.adUnit.changeVisibleSlot(this)),!0},u.prototype.resize=function(t,e,i){c.setFrameSize(this.currentFrame,t,e),this.adUnit.resizeContainer(t,e,i)},u.prototype.buildBaseLoggingRequest=function(t){return r.config.rootPath+"/"+t+"?appid="+r.config.appId+"&acid="+r.config.acId+"&s="+r.config.section+"&sid="+r.config.sessionId+"&auid="+this.adUnit.adUnitId+"&ts="+ +new Date},u.prototype.buildBlankLoggingRequest=function(){var t;this.blankEntry&&(t=this.buildBaseLoggingRequest("lb")+"&iid="+this.blankEntry.iid+"&is="+this.index+"&m="+this.blankEntry.m,c.generateBeacon(t))},u.prototype.buildBaseImpressionLoggingRequest=function(t){return this.buildBaseLoggingRequest(t)+"&iid="+this.iid+"&is="+this.index+"&ci="+this.iatCId+"&olid="+this.iatOlId+"&oid="+this.iatOid+"&cw="+this.iatCw+"&ch="+this.iatCh},u.prototype.logImpression=function(t){this.iid&&this.isHouseOrderMarket()&&c.generateBeacon(t)},u.prototype.buildStdImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("limp"))},u.prototype.stopViewableLoggingTimer=function(){this.viewableTimer&&(s.clear(this.viewableTimer),this.viewableTimer=void 0)},u.prototype.startViewableLoggingTimer=function(){var t=this;!this.adUnit.isInView()||this.viewableTimer||this.viewableCompleted||o.getCurrentState()!==n.BrowserState.Active||this.iatOlId&&(this.viewableTimer=s.timeout(function(){t.viewableCompleted=!0,t.buildViewableImpressionLoggingRequest()},1e3))},u.prototype.buildViewableImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("lvi"))},u.prototype.buildNewImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("ltgi"))},i.Entry=u},{"../../common/EventManager":4,"../../common/Parameters":5,"../../common/Timers":6,"../../common/Utilities":7,"../../interfaces/Enums":9,"../BrowserStateTracker":11,"../DynamicPlacements/Verification":17,"../dfp/dfp-api":27}],26:[function(t,e,i){"use strict";function n(){}Object.defineProperty(i,"__esModule",{value:!0}),i.CustomPolyfill=void 0,n.init=function(){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e=e||0,t.length)===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var s=e[o];if(t.call(n,s,o,e))return s;o++}},configurable:!0,writable:!0}),HTMLDocument.prototype.contains||(HTMLDocument.prototype.contains=function(t){if(this.body&&this.body.contains)return this.body.contains(t);var e=t;do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})},i.CustomPolyfill=n},{}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DfpIntegrationApi=void 0;var Enums_1=require("../../interfaces/Enums"),utils_1=require("./utils"),Timers=require("../../common/Timers"),Utilities=require("../../common/Utilities"),Parameters=require("../../common/Parameters"),MappingService=require("./mapping-service"),aps_1=require("../aps/aps"),UseCaseType,DfpIntegrationApi=(!function(t){t[t.Undetermined=0]="Undetermined",t[t.Refresh=1]="Refresh",t[t.NewInsideHouseAdUnit=2]="NewInsideHouseAdUnit",t[t.NewInsideExistentSlot=3]="NewInsideExistentSlot"}(UseCaseType=UseCaseType||{}),function(){function DfpIntegrationApi(){}return DfpIntegrationApi.getInstance=function(){return DfpIntegrationApi.instance||(DfpIntegrationApi.instance=new DfpIntegrationApi),DfpIntegrationApi.instance},DfpIntegrationApi.render=function(t){var e;"object"!=typeof t.cd?(e={entry:t},DfpIntegrationApi.getInstance().abortRequest(e)):((e=t.cd).entry=t,e.window=t.currentFrame.contentWindow,DfpIntegrationApi.getInstance().render(e))},DfpIntegrationApi.prototype.render=function(e){var t=this;try{this.waitForMainGpt(function(){t.parseContextAndModel(e),e.useCase===UseCaseType.Refresh?t.refreshSlot(e):e.useCase!==UseCaseType.Undetermined&&t.loadGptAndCreateSlot(e)||t.abortRequest(e)})}catch(t){this.abortRequest(e)}},DfpIntegrationApi.prototype.waitForMainGpt=function(t,e){var i=this;(e=e||0)<=2e3&&!utils_1.DfpUtils.isGptAvailable(window.top)?(e+=500,Timers.timeout(function(){return i.waitForMainGpt(t,e)},500)):t()},DfpIntegrationApi.prototype.parseContextAndModel=function(t){t.useCase=UseCaseType.Undetermined,t.pathSuffixIndex=-1,t.pathSuffixes=[];var e=t.entry.adUnit.slot&&t.entry.adUnit.slot.getResponseInformation();if(t.servedLineItemId=e&&e.lineItemId&&e.lineItemId.toString()||"",t.entry.adUnit.slot&&t.entry.adUnit.isIntegration){if(t.entry.isPublisherMarket())return t.slot=t.entry.adUnit.slot,void(t.slot.getResponseInformation()&&(t.useCase=UseCaseType.Refresh,t.gptWindow=utils_1.DfpUtils.getGptWindow(t.window)));t.useCase=UseCaseType.NewInsideExistentSlot}else t.useCase=UseCaseType.NewInsideHouseAdUnit;t.gptWindow=t.window,this.parseNewSlotPath(t),this.parseNewSlotSizes(t)},DfpIntegrationApi.prototype.parseNewSlotPath=function(t){var e,i;t.isIntegrated=!1,t.paths&&(e=Enums_1.DeviceType[Parameters.config.device].toLowerCase(),e=t.paths[e]||t.paths.default)&&""!==e.trim()&&((i=t.paths.suffixes)&&(t.pathSuffixIndex=0,t.pathSuffixes=i.split(",")),i=e.split("/").filter(function(t){return""!==t.trim()}),Parameters.config.integrations.dfp&&i[0]===Parameters.config.integrations.dfp.networkCode&&(t.isIntegrated=!0),t.path=utils_1.DfpUtils.getFinalSlotPath("/"+i.join("/")))},DfpIntegrationApi.prototype.parseNewSlotSizes=function(t){var e=this.getFixedSize(t);if(e)t.sizes=e;else{var i,n,o,e=Enums_1.DeviceType[Parameters.config.device].toLowerCase();if(t.useCase===UseCaseType.NewInsideHouseAdUnit)return t.sizes=t.sizes||t.entry.adUnit.sizes,Array.isArray(t.sizes)&&!t.sizes.length&&t.entry.adUnit.config&&(t.sizes=t.entry.adUnit.config.sizes.map(function(t){return[t.width,t.height]})),Array.isArray(t.sizes)&&0<t.sizes.length?void 0:void(t.sizes=t.sizes[e]||t.sizes.default||[]);t.sizes=t.entry.adUnit.sizes,t.limits&&(e=t.limits[e]||t.limits.default,i=t.entry.adUnit.slot.getSlotElementId(),e)&&e[i]&&(n=e[i][0],o=e[i][1],0<n&&(t.sizes=t.sizes.filter(function(t){return t[0]<=n})),0<o)&&(t.sizes=t.sizes.filter(function(t){return t[1]<=o}))}},DfpIntegrationApi.prototype.loadGptAndCreateSlot=function(t){var e=this;return!!(t.path&&t.sizes&&t.sizes.length)&&(t.aps&&aps_1.ApsIntegration.load(t),utils_1.DfpUtils.loadGpt(t.window,function(){return e.createSlotAndRequestAd(t)}),!0)},DfpIntegrationApi.prototype.createSlotAndRequestAd=function(o){var s=this;o.gptWindow.googletag.cmd.push(function(){var t=o.gptWindow.googletag,e=t.pubads(),i=0<=o.pathSuffixIndex?"/"+o.pathSuffixes[o.pathSuffixIndex]:"",i=o.path+i,n=utils_1.DfpUtils.getSlotDiv(o.window);o.slot=t.defineSlot(i,o.sizes,n).addService(e),o.isIntegrated?(s.copyCustomTargetingToNewGpt(o),s.setTargetingForIntegratedSlot(o,!0)):s.setTargetingForNonIntegratedSlot(o),e.enableSingleRequest(),e.disableInitialLoad(),t.enableServices(),o.pathSuffixIndex<=0&&e.addEventListener("slotRenderEnded",function(t){if(t.slot===o.slot){if(t.isEmpty)return 0<=o.pathSuffixIndex&&o.pathSuffixIndex+1<o.pathSuffixes.length?(o.pathSuffixIndex++,void s.createSlotAndRequestAd(o)):void s.abortRequest(o);s.parseServedSize(o,t),o.isIntegrated&&o.entry.adUnit&&MappingService.pushAdMappingRequest(o.slot,t,o.window,o.entry.adUnit.id)}}),o.aps?aps_1.ApsIntegration.bid(o,function(t){!t&&o.validateBid?s.abortRequest(o):s.proceedWithRequest(o)}):s.proceedWithRequest(o)})},DfpIntegrationApi.prototype.parseServedSize=function(t,e){var i,n=1,o=1;!e.size||e.size[0]<=1||e.size[1]<1?(i=t.window.document.querySelector("#"+e.slot.getSlotElementId()+" iframe"))&&(n=Utilities.tryParseInt((i.style.width||"").replace("px","")),o=Utilities.tryParseInt((i.style.height||"").replace("px",""))):(n=e.size[0],o=e.size[1]),0<n&&0<o&&t.entry.resize(n,o,!0)},DfpIntegrationApi.prototype.abortRequest=function(t){t.entry.onAbortedRequest(),t.entry.passback()},DfpIntegrationApi.prototype.proceedWithRequest=function(t){t.entry.onProceedWithRequest(),t.gptWindow.googletag.pubads().refresh([t.slot])},DfpIntegrationApi.prototype.copyCustomTargetingToNewGpt=function(t){var e,i,n;utils_1.DfpUtils.isGptAvailable(window.top)&&(i=(e=t.window.top&&t.window.top.googletag.pubads())&&e.getTargetingKeys())&&i.length&&(n=t.gptWindow.googletag.pubads(),i.forEach(function(t){n.setTargeting(t,e.getTargeting(t))}))},DfpIntegrationApi.prototype.setTargetingForIntegratedSlot=function(t,e){var i={};if(t.customTarget&&(t.customTargetInAllSlots||e))if("string"==typeof t.customTarget)try{i=JSON.parse(t.customTarget)}catch(t){}else i=t.customTarget;var i=utils_1.DfpUtils.getFinalTargetingMap(i),n="tgRotSlot",o="iat-maw",s="iat-imp-app",r="iat-imp-maw",a="iat-app",c="iat-app-line-id",d="iat-maw-app",l="iat-maw-line-id";t.entry.mawId&&0<t.entry.mawId?(this.clearTargetingKeys(t,[n,s,a,c]),i[r]=["1"],i[d]=[t.entry.mawId.toString()+":"+Parameters.config.appId.toString()],i[o]=[t.entry.mawId.toString()],t.servedLineItemId&&(i[l]=[t.servedLineItemId])):(this.clearTargetingKeys(t,[r,d,o,l]),(!e||0<t.entry.index)&&(i[n]=["1"],i[s]=["1"],i[a]=[Parameters.config.appId.toString()],t.servedLineItemId)&&(i[c]=[t.servedLineItemId])),t.slot.updateTargetingFromMap(i)},DfpIntegrationApi.prototype.clearTargetingKeys=function(e,t){var i=e.slot.getTargetingKeys();t.forEach(function(t){-1<i.indexOf(t)&&e.slot.clearTargeting(t)})},DfpIntegrationApi.prototype.setTargetingForNonIntegratedSlot=function(t){t.entry.isFirstHouseRequest&&t.slot.setTargeting("iat-req",["1"]),0<=t.entry.monetizingMawSlot&&t.slot.setTargeting("iat-maw-slot",[t.entry.monetizingMawSlot.toString()])},DfpIntegrationApi.prototype.getFixedSize=function(t){if(0<t.entry.iatCw&&0<t.entry.iatCh)return[t.entry.iatCw,t.entry.iatCh]},DfpIntegrationApi.prototype.applyLayoutShiftSize=function(t){var e,i,n,o,s,r=this.getFixedSize(t);r&&(e=t.gptWindow.googletag,i=t.slot.getAdUnitPath(),n=t.slot.getSlotElementId(),o=t.slot.getTargetingMap(),e.destroySlots([t.slot]),e.pubads().getSlotIdMap()[t.slot.getSlotId().getId()]||((s=document.getElementById(n))&&(s.style.minWidth=r[0]+"px",s.style.minHeight=r[1]+"px"),s=e.sizeMapping().addSize([0,0],r).build(),t.slot=e.defineSlot(i,r,n).defineSizeMapping(s).addService(e.pubads()),t.slot.updateTargetingFromMap(o),t.window=window.top))},DfpIntegrationApi.prototype.processSuffixKeys=function(t){for(var e=t.suffixKeys||[],i=0;i<e.length;i++){for(var n=e[i],o=n[0],s=n[1],r=new RegExp("(("+s+")?$)","i"),a=t.slot.getTargeting(o),c=a.length;-1<--c;)a[c]=a[c].replace(r,s);t.slot.setTargeting(o,a)}},DfpIntegrationApi.prototype.refreshSlot=function(i){var n,o;this.applyLayoutShiftSize(i),this.setTargetingForIntegratedSlot(i,!1),this.processSuffixKeys(i),this.isCustomRefreshEnabled(i)||((n=this.getPreBidCode(i))?(o=i.window.top.pbjs).que.push(function(){o.requestBids({timeout:o.getConfig().bidderTimeout,adUnitCodes:[n],bidsBackHandler:function(t,e){o.setTargetingForGPTAsync([n]),i.gptWindow.googletag.pubads().refresh([i.slot],{changeCorrelator:!1})}})}):i.gptWindow.googletag.pubads().refresh([i.slot],{changeCorrelator:!1}))},DfpIntegrationApi.prototype.getPreBidCode=function(e){var t;if(e.window.top&&e.window.top.pbjs&&e.window.top.pbjs.adUnits)return 0<=(t=e.window.top.pbjs.adUnits).findIndex(function(t){return t.code===e.slot.getAdUnitPath()})?e.slot.getAdUnitPath():0<=t.findIndex(function(t){return t.code===e.slot.getSlotElementId()})?e.slot.getSlotElementId():void 0},DfpIntegrationApi.prototype.isCustomRefreshEnabled=function(model){var customRefresh=Parameters.config.crm,refreshFunc;return customRefresh?(refreshFunc=eval("window."+customRefresh),"function"==typeof refreshFunc&&(refreshFunc(model.slot.getSlotElementId()),!0)):!1},DfpIntegrationApi}());exports.DfpIntegrationApi=DfpIntegrationApi},{"../../common/Parameters":5,"../../common/Timers":6,"../../common/Utilities":7,"../../interfaces/Enums":9,"../aps/aps":23,"./mapping-service":29,"./utils":30}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.start=void 0;var n=t("../../common/Timers"),o=t("./mapping-service"),s=t("./utils");function r(){var t;s.DfpUtils.isGptAvailable(window.top)?(window.googletag.pubads().addEventListener("slotRenderEnded",function(t){o.pushAdMappingRequest(t.slot,t)}),(t=s.DfpUtils.getFramesWithGpt()).forEach(function(e){e.googletag.pubads().addEventListener("slotRenderEnded",function(t){o.pushAdMappingRequest(t.slot,t,e)})}),n.timeout(function(){s.DfpUtils.isGptAvailable(window.top)&&window.googletag.pubads().getSlots().forEach(function(t){return o.pushAdMappingRequest(t)}),t.forEach(function(e){s.DfpUtils.isGptAvailable(e)&&e.googletag.pubads().getSlots().forEach(function(t){return o.pushAdMappingRequest(t,void 0,e)})})},2e3)):n.timeout(r,0)}i.start=function(){r(),o.start()}},{"../../common/Timers":6,"./mapping-service":29,"./utils":30}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.start=i.pushAdMappingRequest=void 0;var p=t("../../interfaces/Configuration"),g=t("../../interfaces/Enums"),h=t("../../common/Timers"),f=t("../../common/Utilities"),m=t("../../common/Parameters"),o=t("../PlacementManager"),y=t("../../common/EventManager"),v=t("./utils"),n=25,s=200,r=50,w={},b=[],a=window._mappingResponses=[];function c(){var t,e=[];try{for(;b.length&&e.length<n;){var i=b.pop();e.push(i)}e.length&&(t=m.config.rootPath+"/dfp/mapping/batch?appId="+m.config.appId+"&requests="+JSON.stringify(e)+"&h="+encodeURIComponent(f.BrowserUtils.getTopMostPageUrl()),f.BrowserUtils.buildRequestByUrl(document.body,t))}catch(t){}finally{h.timeout(c,s)}}function d(){try{for(;a.length;){var t,e,i,n=a.pop();n.eid&&w[n.eid]&&((e=function(t,e){try{var i=e.element,n=e.windowRef||i.ownerDocument.defaultView,o=(t.scriptWindow=n||void 0,t.window=n||void 0,t.element=i,t);return o.cw=e.width,o.ch=e.height,o.lineItemId=e.lineItemId,o.creativeId=e.creativeId,o.dfpAdUnit=!0,o}catch(t){}}(n,t=w[n.eid]))&&(t.adhesionAdUnitId?(i=o.getAdUnit(t.adhesionAdUnitId))&&i.loadDfpCreativeOnAdhesion(e):o.createAdUnit(e)),delete w[n.eid])}}finally{h.timeout(d,r)}}i.pushAdMappingRequest=function t(e,i,n,o,s){void 0===s&&(s=0);var r=v.DfpUtils.getIntegratedAdUnitPath(e.getAdUnitPath(),m.config.integrations.dfp.networkCode);if(r){n=n||window.top;var a=v.DfpUtils.generateUniqueId(e,n),c=function(t,e){if(t=t.document&&t.document.getElementById(e.getSlotElementId()))return t.querySelector("div[id^=google_ads_iframe_][id$=container__]")}(n,e);if(c){d=e,l=i;var d,l,u=(u=(u=c).querySelector("iframe[id$='"+d.getSlotId().getId()+"']"))&&u.style&&"none"===u.style.display||!u?new p.Size(0,0):((d=(d=new p.Size(parseInt(u.getAttribute("width")||"0"),parseInt(u.getAttribute("height")||"0"))).isTooSmall()?f.getElementSize(u):d).isTooSmall()&&l&&l.size&&(d=new p.Size(l.size[0],l.size[1])),m.config.device===g.DeviceType.Mobile&&d.isTooSmall()&&10<d.width&&(d.height=50),new p.Size(d.width,d.height));if(i||!u.isBlank())if(u.isTooSmall()&&s<10)h.timeout(function(){return t(e,i,n,o,++s)},100);else{if(e.firstMappingDone){if(!i)return;if(i&&w[a])return}e.firstMappingDone=!0,u.isBlank()?(l=c.getAttribute("tg-zone"))&&y.emit(22,l):(l={eaup:r,eoid:(d=e.getResponseInformation())&&d.campaignId?d.campaignId:void 0,eolid:d&&d.lineItemId?d.lineItemId:void 0,advid:d&&d.advertiserId?d.advertiserId:void 0,ct:function(n,e,o){var s,i,t=m.config.integrations.dfp;if((t=t&&t.keyValues)&&t.length)return s={},i=["iat-slot-sizes","iat-served-size"],t.filter(function(e){return 0<=i.findIndex(function(t){return t===e})}).forEach(function(t){switch(t){case i[0]:s[t]=v.DfpUtils.getSlotSizes(n);break;case i[1]:e=e||new p.Size(0,0),s[t]=[e.toString()]}}),t.filter(function(e){return i.findIndex(function(t){return t===e})<0}).forEach(function(e){var t=n.getTargeting(e);t&&t.length&&(s[e]=t);var i=(t=o.googletag.pubads()).getTargetingKeys().filter(function(t){return t===e&&!s[e]});i&&i.length&&t.getTargeting(i[0])&&(s[e]=t.getTargeting(i[0]))}),encodeURIComponent(JSON.stringify(s).replace(new RegExp('"',"g"),"'"))}(e,u,n)||void 0,w:u.width||void 0,h:u.height||void 0,eId:a},w[a]={element:c,adhesionAdUnitId:o,width:l.w,height:l.h,lineItemId:l.eolid,creativeId:d&&d.creativeId||0,windowRef:n},b.push(l))}}}},i.start=function(){h.timeout(c,s),h.timeout(d,r)}},{"../../common/EventManager":4,"../../common/Parameters":5,"../../common/Timers":6,"../../common/Utilities":7,"../../interfaces/Configuration":8,"../../interfaces/Enums":9,"../PlacementManager":20,"./utils":30}],30:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DfpUtils=void 0;var r=t("../../common/Utilities");function a(t){return!!(t&&t.googletag&&t.googletag.pubadsReady)&&!("function"!=typeof(t=t.googletag.pubads)||!t()||"function"!=typeof t().getSlots||!t().getSlots())}function n(t){var e=[];return t&&t.getSizes().forEach(function(t){t.width&&e.push([t.width,t.height])}),e}function s(t){return-1<t.indexOf("[[")&&-1<t.indexOf("]]")}(t=i.DfpUtils||(i.DfpUtils={})).isGptAvailable=a,t.getFramesWithGpt=function(){for(var t,e,i=[],n=window.frames,o=0;o<n.length;o++)try{var s=n[o];a(s)&&(i.push(s),t=s,e=void 0,e=r.CryptoUtils.generateIatFrameId(),t.frameElement)&&t.frameElement.setAttribute("iat-fid",e)}catch(t){}return i},t.generateUniqueId=function(t,e){for(var i=e.self!==window.top?(e=e).frameElement&&e.frameElement.getAttribute("iat-fid")||"adh":"main",n=t.getSlotId().getId().split("/").filter(function(t){return""!==t.trim()}),o=1;o<n.length;o++)i+="_"+n[o];return i.toLowerCase()},t.getGptWindow=function(t){return t.googletag?t:t.parent.googletag?t.parent:t.top},t.getSlotId=function(t){return(t.getAttribute("id")||"").replace("google_ads_iframe_","").replace("__container__","")},t.getSlotSizes=function(t){return n(t).map(function(t){return t[0]+"x"+t[1]})},t.getNumericSlotSizes=n,t.getIntegratedAdUnitPath=function(t,e){return(t=t.split("/").filter(function(t){return""!==t.trim()}))[0].split(",").some(function(t){return t===e})?(t[0]=e,"/"+t.join("/")):null},t.getFinalSlotPath=function(t){if(!t||""===t.trim())return"";if(s(t)){for(var e=t.split("/").filter(function(t){return""!==t.trim()}),i=0;i<e.length;i++){var n,o=e[i];s(o)&&((n=o.replace("[[","").replace("]]","").toUpperCase()).startsWith("LEVEL")&&(o=function(n){if(window.top&&a(window.top))for(var o=window.top.googletag.pubads().getSlots(),t=0;t<o.length;t++){var e=function(t){t=o[t].getAdUnitPath().split("/").filter(function(t){return""!==t.trim()});if(n.startsWith("-")){var e=parseInt(n.substr(1));if(t.length>e)return{value:t[e]}}if(n.startsWith(">")){var i=parseInt(n.substr(1))+1;if(t.length>i)return{value:t.filter(function(t,e){return i<=e}).join("/")}}}(t);if("object"==typeof e)return e.value}return""}(n.replace("LEVEL",""))),e[i]=o)}t="/"+e.join("/")}return t=t.startsWith("/")?t:"/"+t},t.getFinalTargetingMap=function(n){return a(window.top)&&Object.keys(n).filter(s).forEach(function(t){var e=t.replace("[[","").replace("]]",""),i=window.top.googletag.pubads();0<i.getTargeting(e).length?n[e]=i.getTargeting(e):(i=0<i.getSlots().length&&i.getSlots()[0])&&(n[e]=i.getTargeting(e)),delete n[t]}),n},t.loadGpt=function(e,i){var t=r.BrowserUtils.getScriptElement("https://securepubads.g.doubleclick.net/tag/js/gpt.js");t.onload=function(){var t=e.googletag||{};t.cmd=t.cmd||[],i()},e.document.getElementsByTagName("head")[0].appendChild(t)},t.getSlotDiv=function(t){var e="div-gpt-ad-"+ +new Date+"-0",i=t.document.createElement("div");return i.setAttribute("id",e),t.document.getElementsByTagName("body")[0].appendChild(i),e}},{"../../common/Utilities":7}],31:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=(Object.defineProperty(i,"__esModule",{value:!0}),i.PotentialMessage=i.StatusMessage=i.BaseMessage=void 0,t("../../common/Parameters")),t=(r.prototype.addField=function(t){this.fields[this.fields.length]=t},r.prototype.toString=function(){return this.fields.join(r.separator)},r.prototype.getAction=function(t){switch(t){case 0:return"snap  ";case 1:return"pimp  ";case 2:return"pvimp ";case 3:return"ptgi  ";case 4:return"rrptgi"}},r.separator="|",r);function r(t,e){this.fields=[],this.addField(this.getAction(t)),this.addField((e||s.config.section).toString())}i.BaseMessage=t;o(d,a=t);var a,c=d;function d(t,e){e=a.call(this,0,e)||this;return e.addField(t.state.valueOf().toString()),e.addField(t.trackingUnits.join(",")),e.addField(t.adUnits.join(",")),e.addField(t.iatCreatives.join(",")),e.addField(t.iatOrderLines.join(",")),e.addField(t.impressionSlots.join(",")),e.addField(t.sizes.join(",")),e.addField(t.mawIds.join(",")),e.addField(t.lineItemIds.join(",")),e.addField(t.creativeIds.join(",")),e}i.StatusMessage=c;o(u,l=t);var l,c=u;function u(t,e){e=l.call(this,t.type,e)||this;return e.addField(t.id),e.addField(t.isTracking?"1":"0"),t.rules&&(e.addField(t.rules.type),e.addField(t.rules.ruleIds.join(","))),e}i.PotentialMessage=c},{"../../common/Parameters":5}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MultiplierDemo=void 0;var s=t("./Messages"),r=t("./Types"),a=t("../../interfaces/Enums"),c=t("../../common/Utilities"),d=t("./RealtimeMessaging");function l(t){this.realtimeProvider=t,this.secondaryConnections=[]}l.start=function(t){this.instance=new l(t)},l.sendMessage=function(t){if(void 0===t&&(t=0),this.instance&&0!==this.instance.secondaryConnections.length&&this.instance.secondaryData){var e,i,n=this.instance.secondaryData,o=0===t?(e=.5<=Math.random()?1:0,(i=new r.StatusData(e?a.BrowserState.Active:a.BrowserState.Inactive)).trackingUnits=n.trackingUnitIds.map(function(t){return t+":00:"+e}),i.adUnits=n.adUnitIds.map(function(t){return t+":00:"+e}),i.impressionSlots=n.adUnitIds.map(function(t){return 0}),new s.StatusMessage(i,n.sectionId)):(i={type:t,id:((i=.5<=Math.random())?n.trackingUnitIds:n.adUnitIds)[0].toString(),isTracking:i},4===t&&(i.rules={type:"dfp",ruleIds:n.rotationRuleIds}),new s.PotentialMessage(i,n.sectionId));try{this.instance.secondaryConnections.forEach(function(t){t.isConnected()&&t.send(o.toString())})}catch(t){}}},l.handleMessage=function(t){var e;c.Cookies.readCookie(c.Cookies.RealtimeMultiplierCookieName)||(e=t.duration,t.action=t.duration=t.targeting=void 0,c.Cookies.createCookie(c.Cookies.RealtimeMultiplierCookieName,JSON.stringify(t),e),this.startConnections(t))},l.checkConnections=function(){var t=c.Cookies.readCookie(c.Cookies.RealtimeMultiplierCookieName);t&&(t=JSON.parse(t),this.startConnections(t))},l.startConnections=function(e){var t=this;if(this.instance.secondaryData=e,0===this.instance.secondaryConnections.length)for(var i=0;i<e.multiplier;i++){var n=l.instance.realtimeProvider.createInstance();this.instance.secondaryConnections.push(n)}this.instance.secondaryConnections.forEach(function(t){t.isConnected()||t.connect(d.RealtimeMessaging.getHubUrl(e.applicationId,e.hosts))});var o=window.setInterval(function(){c.Cookies.readCookie(c.Cookies.RealtimeMultiplierCookieName)||(t.stopConnections(),window.clearInterval(o))},5e3)},l.stopConnections=function(){this.instance.secondaryConnections.forEach(function(t){t.disconnect()})},i.MultiplierDemo=l},{"../../common/Utilities":7,"../../interfaces/Enums":9,"./Messages":31,"./RealtimeMessaging":33,"./Types":34}],33:[function(t,e,i){"use strict";var n=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,s=e.length;o<s;o++)!n&&o in e||((n=n||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},o=(Object.defineProperty(i,"__esModule",{value:!0}),i.RealtimeMessaging=void 0,t("./Messages")),s=t("../../common/EventManager"),a=t("../../common/Utilities"),c=t("../../common/Parameters"),r=t("./MultiplierDemo"),d=t("../API");function l(){var i=this;this.isReady=!1,this.messagingTypeDetected=!1,this._messageBuffer=[],this.receiveMessage=function(t){try{var e=JSON.parse(t);switch(e.action){case"tgiNotice":case"iat-imp":s.emit(13,e);break;case"maw-cap":s.emit(14,e);break;case"realtime-reconnect":i.handleReconnect(e);break;case"update-version":i.isTargeted(e)&&i.handleUpdateVersion();break;case"show-square":i.isTargeted(e)&&s.emit(15,e);break;case"rotate-ads":i.isTargeted(e)&&s.emit(16,e);break;case"realtime-multiplier":i.isTargeted(e)&&r.MultiplierDemo.handleMessage(e)}}catch(t){}},this.onConnect=function(){i._isConnected=!0,s.emit(11,+new Date),r.MultiplierDemo.checkConnections()},this.onFailedConnect=function(){l.start(!0)},this.onDisconnect=function(){i._isConnected=!1,s.emit(12,+new Date),r.MultiplierDemo.stopConnections()}}l.start=function(t,e){var i=this;void 0===t&&(t=!1),l.instance=l.instance||new l,l.realtimeProvider=l.realtimeProvider||d.get(d.ApiModule.RealtimeProvider),c.config.messagingEnabled&&(l.realtimeProvider?(e=e||0,!c.config.messagingType&&e<l.waitForMessagingTypeTimeout?(e+=l.waitForMessagingTypeInterval,setTimeout(function(){return i.start(!1,e)},l.waitForMessagingTypeInterval)):(l.instance.messagingTypeDetected=!!c.config.messagingType,c.config.messagingType=c.config.messagingType||"direct",l.instance.primaryConnection=l.realtimeProvider.createInstance(),l.instance.waitForEndpoint(t,function(){return l.instance.initialize()}),r.MultiplierDemo.start(l.realtimeProvider))):setTimeout(function(){return i.start()},100))},Object.defineProperty(l,"isForcedDisconnected",{get:function(){return l.instance._forceDisconnect},enumerable:!1,configurable:!0}),l.connect=function(){if(l.instance.isReady)try{l.instance._forceDisconnect=!1,l.instance.primaryConnection.isConnected()||l.instance.primaryConnection.connect(l.getHubUrl())}catch(t){l.instance.errorLog(t)}},l.disconnect=function(){try{l.instance.primaryConnection.disconnect(),l.instance._forceDisconnect=!0}catch(t){l.instance.errorLog(t)}},l.getHubUrl=function(t,e){var i=l.instance.finalMessagingPath;return t?e&&0<e.length&&(i=e[Math.round(Math.random()*(e.length-1))]):t=c.config.appId,i?i+"/hub?appId="+t+"&lockedId="+c.config.lockedId+"&domain="+c.config.domain+"&dev="+c.config.d_type+"&br="+c.config.d_browser+"&os="+c.config.d_os+"&cc="+c.config.g_country+"&rc="+c.config.g_region+"&v="+l.version:""},l.sendStatusUpdate=function(t){l.instance.flushQueue(),l.instance.sendMessage(new o.StatusMessage(t)),r.MultiplierDemo.sendMessage()},l.sendPotentialLog=function(t){l.instance.flushQueue(),l.instance.sendMessage(new o.PotentialMessage(t)),r.MultiplierDemo.sendMessage(t.type)},l.prototype.sendMessage=function(e){var i=this;try{if(this._isConnected)return this.primaryConnection.send(e.toString()).then().catch(function(t){i._messageBuffer.push(e)});this._messageBuffer.push(e)}catch(t){this.errorLog(t)}},l.prototype.flushQueue=function(){var t,e=this;this._isConnected&&0!==this._messageBuffer.length&&(t=n([],this._messageBuffer,!0),this._messageBuffer=[],t.forEach(function(t){return e.sendMessage(t)}))},l.prototype.updateEndpointAndResume=function(t,e){this.finalMessagingPath=t,this.isReady=!0,e()},l.prototype.waitForEndpoint=function(t,e){var i=this;try{var n,o,s=c.config,r="default"===s.messagingType||s.messagingPath!==s.defaultMessagingPath;!t&&this.messagingTypeDetected&&r?(n="default"===s.messagingType?s.defaultMessagingPath:s.messagingPath,this.updateEndpointAndResume(n,e)):((o=a.BrowserUtils.getScriptElement(s.defaultMessagingPath+"/messaging/endpoint")).onload=function(){window.websocket_server&&i.updateEndpointAndResume(window.websocket_server,e)},document.getElementsByTagName("head")[0].appendChild(o))}catch(t){}},l.prototype.isTargeted=function(t){if(t.version&&t.version!==c.config.version&&""!==c.config.version)return!1;if(t.targeting&&t.targeting.geo){var e=t.targeting.geo.countryCode&&c.config.g_country!==t.targeting.geo.countryCode,t=t.targeting.geo.regionCode&&c.config.g_region!==t.targeting.geo.regionCode;if(e||t)return!1}return!0},l.prototype.handleReconnect=function(t){l.disconnect(),t.messagingPath?(c.config.messagingPath=t.messagingPath,c.config.messagingType="direct",l.start()):l.start(!0)},l.prototype.handleUpdateVersion=function(){try{window.location.reload()}catch(t){}},l.prototype.initialize=function(){var e=this;try{this.primaryConnection.onConnect=this.onConnect,this.primaryConnection.onFailedConnect=this.onFailedConnect,this.primaryConnection.onDisconnect=this.onDisconnect,this.primaryConnection.onReceiveMessage=this.receiveMessage,this.primaryConnection.onLogMessage=function(t){return e.errorLog(t)},this.primaryConnection.connect(l.getHubUrl())}catch(t){this.errorLog(t)}},l.prototype.errorLog=function(t){t&&t.message&&t.message},l.version="0.4",l.waitForMessagingTypeTimeout=2e3,l.waitForMessagingTypeInterval=200,i.RealtimeMessaging=l},{"../../common/EventManager":4,"../../common/Parameters":5,"../../common/Utilities":7,"../API":10,"./Messages":31,"./MultiplierDemo":32}],34:[function(t,e,i){"use strict";function n(t){this.state=t,this.trackingUnits=[],this.adUnits=[],this.iatCreatives=[],this.iatOrderLines=[],this.impressionSlots=[],this.sizes=[],this.mawIds=[],this.lineItemIds=[],this.creativeIds=[]}var o;Object.defineProperty(i,"__esModule",{value:!0}),i.StatusData=i.MessageType=void 0,(o=i.MessageType||(i.MessageType={}))[o.Status=0]="Status",o[o.PotentialImpression=1]="PotentialImpression",o[o.PotentialViewable=2]="PotentialViewable",o[o.PotentialRotation=3]="PotentialRotation",o[o.PotentialRotationByRule=4]="PotentialRotationByRule";i.StatusData=n},{}],35:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TcfIntegration=void 0;var n=t("../../common/Parameters");function o(){}o.gdprApplies=function(){var t=n.config;return t.tcData&&t.tcData.gdprApplies},o.isAllowed=function(){var t=n.config;return!t.tcData||!t.tcData.gdprApplies||t.consent},i.TcfIntegration=o},{"../../common/Parameters":5}]},{},[3]);